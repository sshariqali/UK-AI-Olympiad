define("discourse/plugins/poll/discourse/components/modal/poll-breakdown",["exports","@ember/component","@ember/helper","@ember/modifier","@ember/object","@ember/service","@ember/string","@ember/template","@ember-decorators/component","discourse/components/d-modal","discourse/helpers/concat-class","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/decorators","discourse/select-kit/components/combo-box","discourse/truth-helpers","discourse-i18n","discourse/plugins/poll/discourse/components/poll-breakdown-chart","discourse/plugins/poll/discourse/components/poll-breakdown-option","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d,c,h,m,g,f,b,v,_){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
const y=dt7948.c(class extends e.default{static{dt7948.g(this.prototype,"dialog",[n.service])}#t=void dt7948.i(this,"dialog")
static{dt7948.g(this.prototype,"siteSettings",[n.service])}#e=void dt7948.i(this,"siteSettings")
model=null
charts=null
groupedBy=null
highlightedOption=null
displayMode="percentage"
init(){this.set("groupedBy",this.groupableUserFields[0]?.id),this.fetchGroupedPollData(),super.init(...arguments)}title(t,e){return t?(0,r.htmlSafe)(t):e}static{dt7948.n(this.prototype,"title",[(0,h.default)("model.poll.title","model.post.topic.title")])}get groupableUserFields(){return this.siteSettings.poll_groupable_user_fields.split("|").filter(Boolean).map(t=>{const e=t.split("_").filter(Boolean)
return e.length>1&&(e[0]=(0,i.classify)(e[0])),{id:t,label:e.join(" ")}})}totalVotes(t){return t.reduce((t,e)=>t+e.votes,0)}static{dt7948.n(this.prototype,"totalVotes",[(0,h.default)("model.poll.options")])}fetchGroupedPollData(){return(0,d.ajax)("/polls/grouped_poll_results.json",{data:{post_id:this.model.post.id,poll_name:this.model.poll.name,user_field_name:this.groupedBy}}).catch(t=>{t?(0,c.popupAjaxError)(t):this.dialog.alert((0,f.i18n)("poll.error_while_fetching_voters"))}).then(t=>{this.isDestroying||this.isDestroyed||this.set("charts",t.grouped_results)})}setGrouping(t){this.set("groupedBy",t),this.fetchGroupedPollData()}static{dt7948.n(this.prototype,"setGrouping",[s.action])}onSelectPanel(t){this.set("displayMode",t.id)}static{dt7948.n(this.prototype,"onSelectPanel",[s.action])}static{(0,e.setComponentTemplate)((0,_.createTemplateFactory)({id:"WXpfE+RP",block:'[[[8,[32,0],[[24,0,"poll-breakdown has-tabs"]],[["@title","@closeModal"],[[28,[32,1],["poll.breakdown.title"],null],[30,1]]],[["headerBelowTitle","body"],[[[[1,"\\n    "],[10,"ul"],[14,0,"modal-tabs"],[12],[1,"\\n      "],[11,"li"],[16,0,[28,[32,2],["modal-tab percentage",[52,[28,[32,3],[[30,0,["displayMode"]],"percentage"],null],"is-active"]],null]],[4,[32,4],["click",[28,[32,5],[[28,[31,1],[[30,0,["displayMode"]]],null],"percentage"],null]],null],[12],[1,[28,[32,1],["poll.breakdown.percentage"],null]],[13],[1,"\\n      "],[11,"li"],[16,0,[28,[32,2],["modal-tab count",[52,[28,[32,3],[[30,0,["displayMode"]],"count"],null],"is-active"]],null]],[4,[32,4],["click",[28,[32,5],[[28,[31,1],[[30,0,["displayMode"]]],null],"count"],null]],null],[12],[1,[28,[32,1],["poll.breakdown.count"],null]],[13],[1,"\\n    "],[13],[1,"\\n  "]],[]],[[[1,"\\n    "],[10,0],[14,0,"poll-breakdown-sidebar"],[12],[1,"\\n      "],[10,2],[14,0,"poll-breakdown-title"],[12],[1,"\\n        "],[1,[30,0,["title"]]],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"poll-breakdown-total-votes"],[12],[1,[28,[32,1],["poll.breakdown.votes"],[["count"],[[30,0,["model","poll","voters"]]]]]],[13],[1,"\\n\\n      "],[10,"ul"],[14,0,"poll-breakdown-options"],[12],[1,"\\n"],[42,[28,[31,3],[[28,[31,3],[[30,0,["model","poll","options"]]],null]],null],null,[[[1,"          "],[8,[32,6],null,[["@option","@index","@totalVotes","@optionsCount","@displayMode","@highlightedOption","@onMouseOver","@onMouseOut"],[[30,2],[30,3],[30,0,["totalVotes"]],[30,0,["model","poll","options","length"]],[30,0,["displayMode"]],[30,0,["highlightedOption"]],[28,[32,5],[[28,[31,1],[[30,0,["highlightedOption"]]],null],[30,3]],null],[28,[32,5],[[28,[31,1],[[30,0,["highlightedOption"]]],null],null],null]]],null],[1,"\\n"]],[2,3]],null],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n\\n    "],[10,0],[14,0,"poll-breakdown-body"],[12],[1,"\\n      "],[10,0],[14,0,"poll-breakdown-body-header"],[12],[1,"\\n        "],[10,"label"],[14,0,"poll-breakdown-body-header-label"],[12],[1,[28,[32,1],["poll.breakdown.breakdown"],null]],[13],[1,"\\n\\n        "],[8,[32,7],[[24,0,"poll-breakdown-dropdown"]],[["@content","@value","@nameProperty","@onChange"],[[30,0,["groupableUserFields"]],[30,0,["groupedBy"]],"label",[30,0,["setGrouping"]]]],null],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"poll-breakdown-charts"],[12],[1,"\\n"],[42,[28,[31,3],[[28,[31,3],[[30,0,["charts"]]],null]],null],null,[[[1,"          "],[8,[32,8],null,[["@group","@options","@displayMode","@highlightedOption","@setHighlightedOption"],[[28,[32,9],[[30,4],"group"],null],[28,[32,9],[[30,4],"options"],null],[30,0,["displayMode"]],[30,0,["highlightedOption"]],[28,[32,5],[[28,[31,1],[[30,0,["highlightedOption"]]],null]],null]]],null],[1,"\\n"]],[4]],null],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],[]]]]]],["@closeModal","option","index","chart"],["if","mut","each","-track-array"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/modal/poll-breakdown.js",scope:()=>[u.default,f.i18n,p.default,g.eq,o.on,l.fn,v.default,m.default,b.default,l.get],isStrictMode:!0}),this)}},[(0,a.tagName)("")])
t.default=y}),define("discourse/plugins/poll/discourse/components/modal/poll-ui-builder",["exports","@glimmer/component","@glimmer/tracking","@ember/component","@ember/helper","@ember/modifier","@ember/object","@ember/service","@ember-compat/tracked-built-ins","discourse/components/d-button","discourse/components/d-modal","discourse/components/d-toggle-switch","discourse/components/date-time-input","discourse/components/input-tip","discourse/components/radio-button","discourse/helpers/concat-class","discourse/helpers/d-icon","discourse/helpers/with-event-value","discourse/lib/array-tools","discourse/lib/constants","discourse/lib/decorators","discourse/lib/tracked-tools","discourse/lib/utilities","discourse/modifiers/auto-focus","discourse/select-kit/components/combo-box","discourse/select-kit/components/group-chooser","discourse/truth-helpers","discourse-i18n","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d,c,h,m,g,f,b,v,_,y,k,w,C,O,x,T,M,P){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.REGULAR_POLL_TYPE=t.RANKED_CHOICE_POLL_TYPE=t.PIE_CHART_TYPE=t.NUMBER_POLL_TYPE=t.MULTIPLE_POLL_TYPE=t.BAR_CHART_TYPE=void 0
const R=t.BAR_CHART_TYPE="bar",S=t.PIE_CHART_TYPE="pie",V=t.REGULAR_POLL_TYPE="regular",E=t.NUMBER_POLL_TYPE="number",j=t.MULTIPLE_POLL_TYPE="multiple",A=t.RANKED_CHOICE_POLL_TYPE="ranked_choice",L="always"
class D extends e.default{static{dt7948.g(this.prototype,"currentUser",[r.service])}#l=void dt7948.i(this,"currentUser")
static{dt7948.g(this.prototype,"site",[r.service])}#o=void dt7948.i(this,"site")
static{dt7948.g(this.prototype,"siteSettings",[r.service])}#e=void dt7948.i(this,"siteSettings")
static{dt7948.g(this.prototype,"chartType",[l.tracked],function(){return R})}#s=void dt7948.i(this,"chartType")
static{dt7948.g(this.prototype,"dynamic",[l.tracked],function(){return!1})}#n=void dt7948.i(this,"dynamic")
static{dt7948.g(this.prototype,"pollAutoClose",[l.tracked])}#i=void dt7948.i(this,"pollAutoClose")
static{dt7948.g(this.prototype,"pollGroups",[l.tracked])}#r=void dt7948.i(this,"pollGroups")
static{dt7948.g(this.prototype,"pollMax",[l.tracked],function(){return 2})}#a=void dt7948.i(this,"pollMax")
static{dt7948.g(this.prototype,"pollMin",[l.tracked],function(){return 1})}#u=void dt7948.i(this,"pollMin")
static{dt7948.g(this.prototype,"pollOptionsText",[l.tracked],function(){return""})}#p=void dt7948.i(this,"pollOptionsText")
static{dt7948.g(this.prototype,"pollResult",[l.tracked],function(){return L})}#d=void dt7948.i(this,"pollResult")
static{dt7948.g(this.prototype,"pollStep",[l.tracked],function(){return 1})}#c=void dt7948.i(this,"pollStep")
static{dt7948.g(this.prototype,"pollTitle",[l.tracked])}#h=void dt7948.i(this,"pollTitle")
static{dt7948.g(this.prototype,"pollType",[l.tracked],function(){return V})}#m=void dt7948.i(this,"pollType")
static{dt7948.g(this.prototype,"publicPoll",[l.tracked],function(){return this.siteSettings.poll_default_public})}#g=void dt7948.i(this,"publicPoll")
static{dt7948.g(this.prototype,"showAdvanced",[l.tracked],function(){return!1})}#f=void dt7948.i(this,"showAdvanced")
static{dt7948.g(this.prototype,"pollOptions",[k.trackedArray],function(){return[new a.TrackedObject({value:""})]})}#b=void dt7948.i(this,"pollOptions")
get showNumber(){return this.showAdvanced||this.isNumber}get showRankedChoice(){return this.showAdvanced||this.isRankedChoice}get rankedChoiceOrRegular(){return this.isRankedChoice||this.isRegular}get rankedChoiceOrNumber(){return this.isRankedChoice||this.isNumber}get canRemoveOption(){return this.pollOptions.length>1}get pollResults(){const t=[{name:(0,M.i18n)("poll.ui_builder.poll_result.always"),value:L},{name:(0,M.i18n)("poll.ui_builder.poll_result.vote"),value:"on_vote"},{name:(0,M.i18n)("poll.ui_builder.poll_result.closed"),value:"on_close"}]
return this.currentUser.staff&&t.push({name:(0,M.i18n)("poll.ui_builder.poll_result.staff"),value:"staff_only"}),t}get isRegular(){return this.pollType===V}get isNumber(){return this.pollType===E}get isMultiple(){return this.pollType===j}get isRankedChoice(){return this.pollType===A}get pollOptionsCount(){return(this.pollOptions||[]).filter(t=>t.value.length>0).length}get siteGroups(){return this.site.groups.filter(t=>t.id!==_.AUTO_GROUPS.everyone.id)}get isPie(){return this.pollType!==E&&this.chartType===S}enforceMinMaxValues(){this.isMultiple?((this.pollMin<=0||this.pollMin>=this.pollMax||this.pollMin>=this.pollOptionsCount)&&(this.pollMin=this.pollOptionsCount>0?1:0),(this.pollMax<=0||this.pollMin>=this.pollMax||this.pollMax>this.pollOptionsCount)&&(this.pollMax=this.pollOptionsCount)):this.isNumber&&(this.pollMax=this.siteSettings.poll_maximum_options)}static{dt7948.n(this.prototype,"enforceMinMaxValues",[y.bind])}get pollOutput(){let t="[poll",e=""
const l=this.args.model.toolbarEvent.getText().match(/\[poll(\s+name=[^\s\]]+)*.*\]/gim)
l&&(t+=` name=poll${l.length+1}`)
let o=this.pollStep
return o<1&&(o=1),this.pollType&&(t+=` type=${this.pollType}`),this.pollResult&&(t+=` results=${this.pollResult}`),this.pollMin&&this.pollType!==V&&(t+=` min=${this.pollMin}`),this.pollMax&&this.pollType!==V&&(t+=` max=${this.pollMax}`),this.pollType===E&&(t+=` step=${o}`),t+=" public="+(this.publicPoll?"true":"false"),this.chartType&&this.pollType!==E&&(t+=` chartType=${this.chartType}`),this.dynamic&&(t+=" dynamic=true"),this.pollGroups?.length>0&&(t+=` groups=${this.pollGroups}`),this.pollAutoClose&&(t+=` close=${this.pollAutoClose.toISOString()}`),t+="]",e+=`${t}\n`,this.pollTitle&&(e+=`# ${this.pollTitle.trim()}\n`),this.pollOptions.length>0&&this.pollType!==E&&this.pollOptions.forEach(t=>{t.value.length>0&&(e+=`* ${t.value.trim()}\n`)}),e+="[/poll]\n",e}get minNumOfOptionsValidation(){if(!this.isNumber){if(this.pollOptionsCount<1)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.options_min_count")}
if(this.pollOptionsCount>this.siteSettings.poll_maximum_options)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.options_max_count",{count:this.siteSettings.poll_maximum_options})}}return{ok:!0}}get showMinNumOfOptionsValidation(){return 1!==this.pollOptions.length||""!==this.pollOptions[0].value}get minMaxValueValidation(){const t=parseInt(this.pollMin,10)||0,e=parseInt(this.pollMax,10)||0,l=parseInt(this.pollStep,10)||0
if(t<0)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.invalid_min_value")}
if(e<0||this.isMultiple&&e>this.pollOptionsCount)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.invalid_max_value")}
if(t>e)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.invalid_values")}
if(this.isNumber){if(l<1)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.min_step_value")}
const o=(e-t+1)/l
if(o<1)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.options_min_count")}
if(o>this.siteSettings.poll_maximum_options)return{failed:!0,reason:(0,M.i18n)("poll.ui_builder.help.options_max_count",{count:this.siteSettings.poll_maximum_options})}}return{ok:!0}}get disableInsert(){return!this.minMaxValueValidation.ok||!this.minNumOfOptionsValidation.ok}_comboboxOptions(t,e){return[...Array(e-t).keys()].map(e=>({value:e+t,name:e+t}))}onChangePollMin(t){this.pollMin=t.target.value,this.enforceMinMaxValues()}static{dt7948.n(this.prototype,"onChangePollMin",[i.action])}onChangePollMax(t){this.pollMax=t.target.value,this.enforceMinMaxValues()}static{dt7948.n(this.prototype,"onChangePollMax",[i.action])}onOptionsTextChange(t){this.pollOptions=t.target.value.split("\n").map(t=>new a.TrackedObject({value:t})),this.enforceMinMaxValues()}static{dt7948.n(this.prototype,"onOptionsTextChange",[i.action])}insertPoll(){this.args.model.toolbarEvent.addText(this.pollOutput),this.args.closeModal()}static{dt7948.n(this.prototype,"insertPoll",[i.action])}toggleAdvanced(){this.showAdvanced=!this.showAdvanced,this.showAdvanced&&(this.pollOptionsText=this.pollOptions.map(t=>t.value).join("\n"))}static{dt7948.n(this.prototype,"toggleAdvanced",[i.action])}updateValue(t,e){t.value=e.target.value,this.enforceMinMaxValues()}static{dt7948.n(this.prototype,"updateValue",[i.action])}onInputKeydown(t,e,l){if("Enter"===l.key)return l.preventDefault(),l.stopPropagation(),void(""!==l.target.value&&this.addOption(e+1))
if("Period"===l.code&&l.shiftKey&&(l.metaKey||l.ctrlKey)&&this.siteSettings.discourse_local_dates_enabled){const e=(0,w.optionalRequire)("discourse/plugins/discourse-local-dates/lib/generate-current-date-markup")
if(!e)return
l.preventDefault()
const o=this.currentUser.user_option?.timezone,s=e(o),n=l.target,i=n.selectionStart,r=n.selectionEnd,a=t.value||""
t.value=a.slice(0,i)+s+a.slice(r),this.enforceMinMaxValues(),requestAnimationFrame(()=>{n.setSelectionRange(i+s.length,i+s.length)})}}static{dt7948.n(this.prototype,"onInputKeydown",[i.action])}addOption(t){-1===t&&(t=this.pollOptions.length)
const e=new a.TrackedObject({value:""})
this.pollOptions.splice(t,0,e),this.enforceMinMaxValues()}static{dt7948.n(this.prototype,"addOption",[i.action])}removeOption(t){(0,v.removeValueFromArray)(this.pollOptions,t),this.enforceMinMaxValues()}static{dt7948.n(this.prototype,"removeOption",[i.action])}updatePollType(t,e){e?.preventDefault(),this.pollType=t,this.enforceMinMaxValues()}static{dt7948.n(this.prototype,"updatePollType",[i.action])}togglePublic(){this.publicPoll=!this.publicPoll}static{dt7948.n(this.prototype,"togglePublic",[i.action])}static{(0,o.setComponentTemplate)((0,P.createTemplateFactory)({id:"CODW02mc",block:'[[[8,[32,0],[[24,0,"poll-ui-builder"]],[["@title","@closeModal","@inline"],[[28,[32,1],["poll.ui_builder.title"],null],[30,1],[30,2]]],[["body","footer"],[[[[1,"\\n    "],[10,"ul"],[14,0,"nav nav-pills poll-type"],[12],[1,"\\n      "],[10,"li"],[12],[1,"\\n        "],[8,[32,2],[[16,0,[28,[32,3],["poll-type-value poll-type-value-regular",[52,[30,0,["isRegular"]],"active"]],null]]],[["@action"],[[28,[32,4],[[30,0,["updatePollType"]],"regular"],null]]],[["default"],[[[[1,"\\n          "],[1,[28,[32,1],["poll.ui_builder.poll_type.regular"],null]],[1,"\\n        "]],[]]]]],[1,"\\n      "],[13],[1,"\\n      "],[10,"li"],[12],[1,"\\n        "],[8,[32,2],[[16,0,[28,[32,3],["poll-type-value poll-type-value-multiple",[52,[30,0,["isMultiple"]],"active"]],null]]],[["@action"],[[28,[32,4],[[30,0,["updatePollType"]],"multiple"],null]]],[["default"],[[[[1,"\\n          "],[1,[28,[32,1],["poll.ui_builder.poll_type.multiple"],null]],[1,"\\n        "]],[]]]]],[1,"\\n      "],[13],[1,"\\n"],[41,[30,0,["showNumber"]],[[[1,"        "],[10,"li"],[12],[1,"\\n          "],[8,[32,2],[[16,0,[28,[32,3],["poll-type-value poll-type-value-number",[52,[30,0,["isNumber"]],"active"]],null]]],[["@action"],[[28,[32,4],[[30,0,["updatePollType"]],"number"],null]]],[["default"],[[[[1,"\\n            "],[1,[28,[32,1],["poll.ui_builder.poll_type.number"],null]],[1,"\\n          "]],[]]]]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["showRankedChoice"]],[[[1,"        "],[10,"li"],[12],[1,"\\n          "],[8,[32,2],[[16,0,[28,[32,3],["poll-type-value poll-type-value-ranked-choice",[52,[30,0,["isRankedChoice"]],"active"]],null]]],[["@action"],[[28,[32,4],[[30,0,["updatePollType"]],"ranked_choice"],null]]],[["default"],[[[[1,"\\n            "],[1,[28,[32,1],["poll.ui_builder.poll_type.ranked_choice"],null]],[1,"\\n          "]],[]]]]],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n\\n"],[41,[30,0,["showAdvanced"]],[[[1,"      "],[10,0],[14,0,"input-group poll-title"],[12],[1,"\\n        "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_title.label"],null]],[13],[1,"\\n        "],[11,"input"],[16,2,[30,0,["pollTitle"]]],[24,4,"text"],[4,[32,5],["input",[28,[32,6],[[28,[32,4],[[28,[31,1],[[30,0,["pollTitle"]]],null]],null]],null]],null],[12],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[51,[30,0,["isNumber"]]],[[[1,"      "],[10,0],[14,0,"poll-options"],[12],[1,"\\n"],[41,[30,0,["showAdvanced"]],[[[1,"          "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_options.label"],null]],[13],[1,"\\n          "],[8,[32,7],[[4,[32,5],["input",[30,0,["onOptionsTextChange"]]],null]],[["@value"],[[30,0,["pollOptionsText"]]]],null],[1,""],[41,[30,0,["showMinNumOfOptionsValidation"]],[[[41,[51,[30,0,["minNumOfOptionsValidation","ok"]]],[[[1,"              "],[8,[32,8],null,[["@validation"],[[30,0,["minNumOfOptionsValidation"]]]],null],[1,"\\n"]],[]],null]],[]],null]],[]],[[[42,[28,[31,4],[[28,[31,4],[[30,0,["pollOptions"]]],null]],null],null,[[[1,"            "],[10,0],[14,0,"input-group poll-option-value"],[12],[1,"\\n              "],[11,"input"],[16,2,[30,3,["value"]]],[24,4,"text"],[4,[32,9],null,null],[4,[32,5],["input",[28,[32,4],[[30,0,["updateValue"]],[30,3]],null]],null],[4,[32,5],["keydown",[28,[32,4],[[30,0,["onInputKeydown"]],[30,3],[30,4]],null]],null],[12],[13],[1,"\\n"],[41,[30,0,["canRemoveOption"]],[[[1,"                "],[8,[32,2],null,[["@icon","@action"],["trash-can",[28,[32,4],[[30,0,["removeOption"]],[30,3]],null]]],null],[1,"\\n"]],[]],null],[1,"            "],[13],[1,"\\n"]],[3,4]],null],[1,"\\n          "],[10,0],[14,0,"poll-option-controls"],[12],[1,"\\n            "],[8,[32,2],[[24,0,"btn-default poll-option-add"]],[["@icon","@label","@action"],["plus","poll.ui_builder.poll_options.add",[28,[32,4],[[30,0,["addOption"]],-1],null]]],null],[1,"\\n"],[41,[28,[32,10],[[30,0,["showMinNumOfOptionsValidation"]],[28,[32,11],[[30,0,["minNumOfOptionsValidation","ok"]]],null]],null],[[[1,"              "],[8,[32,8],null,[["@validation"],[[30,0,["minNumOfOptionsValidation"]]]],null],[1,"\\n"]],[]],null],[1,"          "],[13],[1,"\\n"]],[]]],[1,"      "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[51,[30,0,["rankedChoiceOrRegular"]]],[[[1,"      "],[10,0],[14,0,"options"],[12],[1,"\\n        "],[10,0],[14,0,"input-group poll-number"],[12],[1,"\\n          "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_config.min"],null]],[13],[1,"\\n          "],[11,"input"],[16,2,[30,0,["pollMin"]]],[24,0,"poll-options-min"],[24,"min","1"],[24,4,"number"],[4,[32,5],["input",[30,0,["onChangePollMin"]]],null],[12],[13],[1,"\\n        "],[13],[1,"\\n\\n        "],[10,0],[14,0,"input-group poll-number"],[12],[1,"\\n          "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_config.max"],null]],[13],[1,"\\n          "],[11,"input"],[16,2,[30,0,["pollMax"]]],[24,0,"poll-options-max"],[24,"min","1"],[24,4,"number"],[4,[32,5],["input",[30,0,["onChangePollMax"]]],null],[12],[13],[1,"\\n        "],[13],[1,"\\n\\n"],[41,[30,0,["isNumber"]],[[[1,"          "],[10,0],[14,0,"input-group poll-number"],[12],[1,"\\n            "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_config.step"],null]],[13],[1,"\\n            "],[11,"input"],[16,2,[30,0,["pollStep"]]],[24,"min","1"],[24,0,"poll-options-step"],[24,4,"number"],[4,[32,5],["input",[28,[32,6],[[28,[32,4],[[28,[31,1],[[30,0,["pollStep"]]],null]],null]],null]],null],[12],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n\\n"],[41,[51,[30,0,["minMaxValueValidation","ok"]]],[[[1,"        "],[8,[32,8],null,[["@validation"],[[30,0,["minMaxValueValidation"]]]],null],[1,"\\n"]],[]],null]],[]],null],[1,"\\n    "],[10,0],[14,0,"input-group poll-public"],[12],[1,"\\n      "],[8,[32,12],[[24,0,"poll-toggle-public"],[4,[32,5],["click",[30,0,["togglePublic"]]],null]],[["@state","@label"],[[30,0,["publicPoll"]],"poll.ui_builder.poll_public.label"]],null],[1,"\\n    "],[13],[1,"\\n\\n"],[41,[30,0,["showAdvanced"]],[[[1,"      "],[10,0],[14,0,"input-group poll-dynamic"],[12],[1,"\\n        "],[8,[32,12],[[24,0,"poll-toggle-dynamic"],[4,[32,5],["click",[28,[32,4],[[28,[31,1],[[30,0,["dynamic"]]],null],[28,[32,11],[[30,0,["dynamic"]]],null]],null]],null]],[["@state","@label"],[[30,0,["dynamic"]],"poll.ui_builder.poll_dynamic.label"]],null],[1,"\\n      "],[13],[1,"\\n      "],[10,0],[14,0,"input-group poll-allowed-groups"],[12],[1,"\\n        "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_groups.label"],null]],[13],[1,"\\n        "],[8,[32,13],null,[["@content","@value","@onChange","@labelProperty","@valueProperty"],[[30,0,["siteGroups"]],[30,0,["pollGroups"]],[28,[32,4],[[28,[31,1],[[30,0,["pollGroups"]]],null]],null],"name","name"]],null],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"input-group poll-date"],[12],[1,"\\n        "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.automatic_close.label"],null]],[13],[1,"\\n        "],[8,[32,14],null,[["@date","@onChange","@clearable","@useGlobalPickerContainer"],[[30,0,["pollAutoClose"]],[28,[32,4],[[28,[31,1],[[30,0,["pollAutoClose"]]],null]],null],true,true]],null],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,0],[14,0,"input-group poll-select"],[12],[1,"\\n        "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_result.label"],null]],[13],[1,"\\n        "],[8,[32,15],[[24,0,"poll-result"]],[["@content","@value","@valueProperty","@onChange"],[[30,0,["pollResults"]],[30,0,["pollResult"]],"value",[28,[32,4],[[28,[31,1],[[30,0,["pollResult"]]],null]],null]]],null],[1,"\\n      "],[13],[1,"\\n\\n"],[41,[51,[30,0,["rankedChoiceOrNumber"]]],[[[1,"        "],[10,0],[14,0,"input-group poll-select column"],[12],[1,"\\n          "],[10,"label"],[14,0,"input-group-label"],[12],[1,[28,[32,1],["poll.ui_builder.poll_chart_type.label"],null]],[13],[1,"\\n\\n          "],[10,0],[14,0,"radio-group"],[12],[1,"\\n            "],[8,[32,16],null,[["@id","@name","@value","@selection"],["poll-chart-type-bar","poll-chart-type","bar",[30,0,["chartType"]]]],null],[1,"\\n            "],[10,"label"],[14,"for","poll-chart-type-bar"],[12],[1,[28,[32,17],["chart-bar"],null]],[1,"\\n              "],[1,[28,[32,1],["poll.ui_builder.poll_chart_type.bar"],null]],[13],[1,"\\n          "],[13],[1,"\\n\\n          "],[10,0],[14,0,"radio-group"],[12],[1,"\\n            "],[8,[32,16],null,[["@id","@name","@value","@selection"],["poll-chart-type-pie","poll-chart-type","pie",[30,0,["chartType"]]]],null],[1,"\\n            "],[10,"label"],[14,"for","poll-chart-type-pie"],[12],[1,[28,[32,17],["chart-pie"],null]],[1,"\\n              "],[1,[28,[32,1],["poll.ui_builder.poll_chart_type.pie"],null]],[13],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null]],[]],null],[1,"  "]],[]],[[[1,"\\n    "],[8,[32,2],[[24,0,"btn-primary insert-poll"]],[["@action","@icon","@label","@disabled"],[[30,0,["insertPoll"]],"chart-bar","poll.ui_builder.insert",[30,0,["disableInsert"]]]],null],[1,"\\n\\n    "],[8,[32,2],[[24,0,"btn-flat"]],[["@label","@action"],["cancel",[30,1]]],null],[1,"\\n\\n    "],[8,[32,2],[[24,0,"btn-default show-advanced"]],[["@action","@icon","@title"],[[30,0,["toggleAdvanced"]],"gear",[52,[30,0,["showAdvanced"]],"poll.ui_builder.hide_advanced","poll.ui_builder.show_advanced"]]],null],[1,"\\n\\n  "]],[]]]]]],["@closeModal","@inline","option","index"],["if","mut","unless","each","-track-array"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/modal/poll-ui-builder.js",scope:()=>[p.default,M.i18n,u.default,g.default,s.fn,n.on,b.default,o.Textarea,h.default,C.default,T.and,T.not,d.default,x.default,c.default,O.default,m.default,f.default],isStrictMode:!0}),this)}}t.default=D}),define("discourse/plugins/poll/discourse/components/poll-breakdown-chart",["exports","@ember/component","@ember/object/computed","@ember/runloop","@ember/template","@ember-decorators/component","discourse/lib/decorators","discourse/lib/load-chart-js","discourse-i18n","discourse/plugins/poll/lib/chart-colors","discourse/plugins/poll/discourse/components/modal/poll-ui-builder","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
const c=dt7948.c(class extends e.default{group=null
options=null
displayMode=null
highlightedOption=null
setHighlightedOption=null
static{dt7948.g(this.prototype,"data",[(0,l.mapBy)("options","votes")])}#v=void dt7948.i(this,"data")
_optionToSlice=null
_previousHighlightedSliceIndex=null
_previousDisplayMode=null
init(){super.init(...arguments),this._optionToSlice={}}willDestroy(){super.willDestroy(...arguments),this._chart&&this._chart.destroy()}async didInsertElement(){super.didInsertElement(...arguments)
const t=this.element.querySelector("canvas"),[e,l]=await Promise.all([(0,r.default)(),(0,r.loadChartJSDatalabels)()])
this._chart=new e(t.getContext("2d"),{...this.chartConfig,plugins:[l]})}didReceiveAttrs(){super.didReceiveAttrs(...arguments),this._chart&&(this._updateDisplayMode(),this._updateHighlight())}colorStyle(t,e){return(0,s.htmlSafe)(`background: ${t[e]};`)}static{dt7948.n(this.prototype,"colorStyle",[(0,i.default)("optionColors","index")])}chartConfig(t,e){const l=[]
let s=0
this._optionToSlice={},t.forEach((t,e)=>{t>0&&(l.push(t),this._optionToSlice[e]=s++)})
const n=l.reduce((t,e)=>t+e,0),i=(0,u.getColors)(t.length).filter((e,l)=>t[l]>0)
return{type:p.PIE_CHART_TYPE,data:{datasets:[{data:l,backgroundColor:i,hoverBorderColor:"#fff"}]},options:{plugins:{tooltip:!1,datalabels:{color:"#333",backgroundColor:"rgba(255, 255, 255, 0.5)",borderRadius:2,font:{family:getComputedStyle(document.body).fontFamily,size:16},padding:{top:2,right:6,bottom:2,left:6},formatter(t){if("percentage"!==e)return t
return`${a.default.toNumber(t/n*100,{precision:1})}%`}}},responsive:!0,aspectRatio:1.1,animation:{duration:0},onHover:(t,e)=>{if(!e.length)return void(0,o.next)(()=>{this.setHighlightedOption(null)})
const l=e[0].index,s=Object.keys(this._optionToSlice).find(t=>this._optionToSlice[t]===l);(0,o.next)(()=>{this.setHighlightedOption(Number(s))})}}}}static{dt7948.n(this.prototype,"chartConfig",[(0,i.default)("data","displayMode")])}_updateDisplayMode(){if(this.displayMode!==this._previousDisplayMode){const t=this.chartConfig
this._chart.data.datasets=t.data.datasets,this._chart.options=t.options,this._chart.update(),this._previousDisplayMode=this.displayMode}}_updateHighlight(){const t=[]
if(this.highlightedOption){const e=this._optionToSlice[this.highlightedOption]
void 0!==e&&t.push({datasetIndex:0,index:e})}this._chart.setActiveElements(t),this._chart.update()}static{(0,e.setComponentTemplate)((0,d.createTemplateFactory)({id:"vqcYlkdG",block:'[[[10,"label"],[14,0,"poll-breakdown-chart-label"],[12],[1,[30,1]],[13],[1,"\\n"],[10,"canvas"],[14,0,"poll-breakdown-chart-chart"],[12],[13]],["@group"],[]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-breakdown-chart.js",isStrictMode:!0}),this)}},[(0,n.classNames)("poll-breakdown-chart-container")])
t.default=c}),define("discourse/plugins/poll/discourse/components/poll-breakdown-option",["exports","@ember/component","@ember/modifier","@ember/object/computed","@ember/template","@ember-decorators/component","discourse/lib/computed","discourse/lib/decorators","discourse/lib/load-chart-js","discourse-i18n","discourse/plugins/poll/lib/chart-colors","discourse/plugins/poll/discourse/modifiers/decorate-poll-option","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d,c){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
const h=dt7948.c(class extends e.default{option=null
index=null
totalVotes=null
optionsCount=null
displayMode=null
highlightedOption=null
onMouseOver=null
onMouseOut=null
static{dt7948.g(this.prototype,"highlighted",[(0,i.propertyEqual)("highlightedOption","index")])}#_=void dt7948.i(this,"highlighted")
static{dt7948.g(this.prototype,"showPercentage",[(0,o.equal)("displayMode","percentage")])}#y=void dt7948.i(this,"showPercentage")
constructor(){super(...arguments),(0,a.default)().then(t=>{this.set("Chart",t)})}percent(t,e){return u.default.toNumber(t/e*100,{precision:1})}static{dt7948.n(this.prototype,"percent",[(0,r.default)("option.votes","totalVotes")])}optionColors(t){return(0,p.getColors)(t)}static{dt7948.n(this.prototype,"optionColors",[(0,r.default)("optionsCount")])}colorBackgroundStyle(t){if(t)return(0,s.htmlSafe)("background: rgba(0, 0, 0, 0.1);")}static{dt7948.n(this.prototype,"colorBackgroundStyle",[(0,r.default)("highlighted")])}colorPreviewStyle(t,e,l,o){const n=e?t?.helpers.getHoverColor(l[o]):l[o]
return(0,s.htmlSafe)(`background: ${n};`)}static{dt7948.n(this.prototype,"colorPreviewStyle",[(0,r.default)("Chart","highlighted","optionColors","index")])}static{(0,e.setComponentTemplate)((0,c.createTemplateFactory)({id:"wtUjcWAK",block:'[[[11,"li"],[24,0,"poll-breakdown-option"],[16,5,[30,0,["colorBackgroundStyle"]]],[24,"role","button"],[4,[32,0],["mouseover",[30,1]],null],[4,[32,0],["mouseout",[30,2]],null],[12],[1,"\\n  "],[10,1],[14,0,"poll-breakdown-option-color"],[15,5,[30,0,["colorPreviewStyle"]]],[12],[13],[1,"\\n\\n  "],[10,1],[14,0,"poll-breakdown-option-count"],[12],[1,"\\n"],[41,[30,0,["showPercentage"]],[[[1,"      "],[1,[28,[32,1],["number.percent"],[["count"],[[30,0,["percent"]]]]]],[1,"\\n"]],[]],[[[1,"      "],[1,[30,3,["votes"]]],[1,"\\n"]],[]]],[1,"  "],[13],[1,"\\n  "],[11,1],[24,0,"poll-breakdown-option-text"],[4,[32,2],[[30,3,["html"]]],null],[12],[13],[1,"\\n"],[13]],["@onMouseOver","@onMouseOut","@option"],["if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-breakdown-option.js",scope:()=>[l.on,u.i18n,d.default],isStrictMode:!0}),this)}},[(0,n.tagName)("")])
t.default=h}),define("discourse/plugins/poll/discourse/components/poll-buttons-dropdown",["exports","@glimmer/component","@ember/helper","@ember/object","@ember/service","discourse/components/d-button","discourse/components/dropdown-menu","discourse/float-kit/components/d-menu","discourse/helpers/d-icon","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
const d={exportResults:{className:"btn-default export-results",label:"poll.export-results.label",title:"poll.export-results.title",icon:"download",action:"exportResults"},showBreakdown:{className:"btn-default show-breakdown",label:"poll.breakdown.breakdown",icon:"chart-pie",action:"showBreakdown"},openPoll:{className:"btn-default toggle-status",label:"poll.open.label",title:"poll.open.title",icon:"unlock-keyhole",action:"toggleStatus"},closePoll:{className:"btn-default toggle-status",label:"poll.close.label",title:"poll.close.title",icon:"lock",action:"toggleStatus"},showTally:{className:"btn-default show-tally",label:"poll.show-tally.label",title:"poll.show-tally.title",icon:"info",action:"toggleDisplayMode"},showPercentage:{className:"btn-default show-percentage",label:"poll.show-percentage.label",title:"poll.show-percentage.title",icon:"info",action:"toggleDisplayMode"}}
class c extends e.default{static{dt7948.g(this.prototype,"currentUser",[s.service])}#l=void dt7948.i(this,"currentUser")
static{dt7948.g(this.prototype,"siteSettings",[s.service])}#e=void dt7948.i(this,"siteSettings")
constructor(){super(...arguments),this.getDropdownButtonState=!1}dropDownClick(t){this.args.dropDownClick(t)}static{dt7948.n(this.prototype,"dropDownClick",[o.action])}get getDropdownContent(){const t=[],e=this.currentUser&&this.currentUser.admin,l=this.siteSettings.data_explorer_enabled,o=this.args.isRankedChoice?this.siteSettings.poll_export_ranked_choice_data_explorer_query_id:this.siteSettings.poll_export_data_explorer_query_id,{closed:s,voters:n,isStaff:i,isMe:r,topicArchived:a,groupableUserFields:u,isAutomaticallyClosed:p,availableDisplayMode:c}=this.args
if(c){const e={...d[c]}
e.id=e.action,t.push(e)}if(u.length&&n>0){const e={...d.showBreakdown}
e.id=e.action,t.push(e)}if(e&&l&&n>0&&o){const e={...d.exportResults}
e.id=e.action,t.push(e)}if(this.currentUser&&(r||i)&&!a)if(s){if(!p){const e={...d.openPoll}
e.id=e.action,t.push(e)}}else{const e={...d.closePoll}
e.id=e.action,t.push(e)}return t}get showDropdown(){return this.getDropdownContent.length>1}get showDropdownAsButton(){return 1===this.getDropdownContent.length}static{(0,u.setComponentTemplate)((0,p.createTemplateFactory)({id:"5DOSUzOq",block:'[[[10,0],[14,0,"poll-buttons-dropdown"],[12],[1,"\\n"],[41,[30,0,["showDropdown"]],[[[1,"    "],[8,[32,0],[[24,0,"widget-dropdown-header"]],null,[["trigger","content"],[[[[1,"\\n        "],[1,[28,[32,1],["gear"],null]],[1,"\\n      "]],[]],[[[1,"\\n        "],[8,[32,2],null,null,[["default"],[[[[1,"\\n"],[42,[28,[31,2],[[28,[31,2],[[30,0,["getDropdownContent"]]],null]],null],null,[[[1,"            "],[8,[30,1,["item"]],null,null,[["default"],[[[[1,"\\n              "],[8,[32,3],[[16,0,[29,["widget-button ",[30,2,["className"]]]]]],[["@icon","@label","@action"],[[30,2,["icon"]],[30,2,["label"]],[28,[32,4],[[30,0,["dropDownClick"]],[30,2,["action"]]],null]]],null],[1,"\\n            "]],[]]]]],[1,"\\n            "],[8,[30,1,["divider"]],null,null,null],[1,"\\n"]],[2]],null],[1,"        "]],[1]]]]],[1,"\\n      "]],[]]]]],[1,"\\n"]],[]],[[[41,[30,0,["showDropdownAsButton"]],[[[1,"    "],[8,[32,3],[[16,0,[29,["widget-button ",[28,[32,5],[[30,0,["getDropdownContent"]],"0.className"],null]]]]],[["@icon","@label","@action"],[[28,[32,5],[[30,0,["getDropdownContent"]],"0.icon"],null],[28,[32,5],[[30,0,["getDropdownContent"]],"0.label"],null],[28,[32,4],[[30,0,["dropDownClick"]],[28,[32,5],[[30,0,["getDropdownContent"]],"0.action"],null]],null]]],null],[1,"\\n  "]],[]],null]],[]]],[13]],["dropdown","content"],["if","each","-track-array"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-buttons-dropdown.js",scope:()=>[r.default,a.default,i.default,n.default,l.fn,o.get],isStrictMode:!0}),this)}}t.default=c}),define("discourse/plugins/poll/discourse/components/poll-info",["exports","@glimmer/component","@ember/service","@ember/template","discourse/helpers/d-icon","discourse/lib/formatter","discourse-i18n","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
const u="staff_only"
class p extends e.default{static{dt7948.g(this.prototype,"currentUser",[l.service])}#l=void dt7948.i(this,"currentUser")
get multipleHelpText(){const{min:t,max:e,options:l}=this.args,s=l.length
if(e>0){if(t===e&&t>1)return(0,o.htmlSafe)((0,i.i18n)("poll.multiple.help.x_options",{count:t}))
if(t>1)return e<s?(0,o.htmlSafe)((0,i.i18n)("poll.multiple.help.between_min_and_max_options",{min:t,max:e})):(0,o.htmlSafe)((0,i.i18n)("poll.multiple.help.at_least_min_options",{count:t}))
if(e<=s)return(0,o.htmlSafe)((0,i.i18n)("poll.multiple.help.up_to_max_options",{count:e}))}}get votersLabel(){return(0,i.i18n)("poll.voters",{count:this.args.voters})}get showTotalVotes(){return this.args.isMultiple&&(this.args.showResults||this.args.closed)}get totalVotes(){return this.args.options.reduce((t,e)=>t+parseInt(e.votes,10),0)}get totalVotesLabel(){return(0,i.i18n)("poll.total_votes",{count:this.totalVotes})}get automaticCloseAgeLabel(){return(0,i.i18n)("poll.automatic_close.age",this.age)}get automaticCloseClosesInLabel(){return(0,i.i18n)("poll.automatic_close.closes_in",this.timeLeft)}get showMultipleHelpText(){return this.args.isMultiple&&!this.args.showResults&&!this.args.closed}get closeTitle(){const t=moment.utc(this.args.close,"YYYY-MM-DD HH:mm:ss Z")
return t.isValid()?t.format("LLL"):""}get age(){const t=moment.utc(this.args.close,"YYYY-MM-DD HH:mm:ss Z")
return t.isValid()?(0,n.relativeAge)(t.toDate(),{addAgo:!0}):0}get timeLeft(){const t=moment.utc(this.args.close,"YYYY-MM-DD HH:mm:ss Z")
return t.isValid()?moment().to(t,!0):0}get resultsOnVote(){return!("on_vote"!==this.args.results||this.args.hasVoted||this.currentUser&&this.args.postUserId===this.currentUser.id)}get resultsOnVoteTitle(){return(0,o.htmlSafe)((0,i.i18n)("poll.results.vote.title"))}get resultsOnClose(){return"on_close"===this.args.results&&!this.args.closed}get resultsOnCloseTitle(){return(0,o.htmlSafe)((0,i.i18n)("poll.results.closed.title"))}get resultsStaffOnly(){return this.args.results===u&&!(this.currentUser&&this.currentUser.staff)}get resultsStaffOnlyTitle(){return(0,o.htmlSafe)((0,i.i18n)("poll.results.staff.title"))}get publicTitle(){return!this.args.closed&&!this.args.showResults&&this.args.isPublic&&this.args.results!==u}get publicTitleLabel(){return(0,o.htmlSafe)((0,i.i18n)("poll.public.title"))}get showInstructionsSection(){return this.showMultipleHelpText||this.args.close||this.resultsOnVote||this.resultsOnClose||this.resultsStaffOnly||this.publicTitle||this.args.isDynamic}static{(0,r.setComponentTemplate)((0,a.createTemplateFactory)({id:"fBLe22UM",block:'[[[10,0],[14,0,"poll-info"],[12],[1,"\\n  "],[10,0],[14,0,"poll-info_counts"],[12],[1,"\\n    "],[10,0],[14,0,"poll-info_counts-count"],[12],[1,"\\n      "],[10,1],[14,0,"info-number"],[12],[1,[30,1]],[13],[1,"\\n      "],[10,1],[14,0,"info-label"],[12],[1,[30,0,["votersLabel"]]],[13],[1,"\\n    "],[13],[1,"\\n"],[41,[30,0,["showTotalVotes"]],[[[1,"      "],[10,0],[14,0,"poll-info_counts-count"],[12],[1,"\\n        "],[10,1],[14,0,"info-number"],[12],[1,[30,0,["totalVotes"]]],[13],[1,"\\n        "],[10,1],[14,0,"info-label"],[12],[1,[30,0,["totalVotesLabel"]]],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"],[41,[30,0,["showInstructionsSection"]],[[[1,"    "],[10,"ul"],[14,0,"poll-info_instructions"],[12],[1,"\\n"],[41,[52,[30,2],true,[30,0,["poll","dynamic"]]],[[[1,"        "],[10,"li"],[14,0,"is-dynamic"],[12],[1,"\\n          "],[1,[28,[32,0],["shuffle"],null]],[1,"\\n          "],[10,1],[12],[1,[28,[32,1],["poll.dynamic.enabled_hint"],null]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["showMultipleHelpText"]],[[[1,"        "],[10,"li"],[14,0,"multiple-help-text"],[12],[1,"\\n          "],[1,[28,[32,0],["list-ul"],null]],[1,"\\n          "],[10,1],[12],[1,[30,0,["multipleHelpText"]]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["poll","close"]],[[[41,[30,0,["isAutomaticallyClosed"]],[[[1,"          "],[10,"li"],[15,"title",[30,0,["title"]]],[12],[1,"\\n            "],[1,[28,[32,0],["lock"],null]],[1,"\\n            "],[10,1],[12],[1,[30,0,["automaticCloseAgeLabel"]]],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],[[[1,"          "],[10,"li"],[15,"title",[30,0,["title"]]],[12],[1,"\\n            "],[1,[28,[32,0],["far-clock"],null]],[1,"\\n            "],[10,1],[12],[1,[30,0,["automaticCloseClosesInLabel"]]],[13],[1,"\\n          "],[13],[1,"\\n"]],[]]]],[]],null],[41,[30,0,["resultsOnVote"]],[[[1,"        "],[10,"li"],[14,0,"results-on-vote"],[12],[1,"\\n          "],[1,[28,[32,0],["check"],null]],[1,"\\n          "],[10,1],[12],[1,[30,0,["resultsOnVoteTitle"]]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["resultsOnClose"]],[[[1,"        "],[10,"li"],[14,0,"results-on-close"],[12],[1,"\\n          "],[1,[28,[32,0],["lock"],null]],[1,"\\n          "],[10,1],[12],[1,[30,0,["resultsOnCloseTitle"]]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["resultsStaffOnly"]],[[[1,"        "],[10,"li"],[14,0,"results-staff-only"],[12],[1,"\\n          "],[1,[28,[32,0],["shield-halved"],null]],[1,"\\n          "],[10,1],[12],[1,[30,0,["resultsStaffOnlyTitle"]]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[41,[30,0,["publicTitle"]],[[[1,"        "],[10,"li"],[14,0,"is-public"],[12],[1,"\\n          "],[1,[28,[32,0],["far-eye"],null]],[1,"\\n          "],[10,1],[12],[1,[30,0,["publicTitleLabel"]]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],null],[1,"    "],[13],[1,"\\n"]],[]],null],[13]],["@voters","@isDynamic"],["if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-info.js",scope:()=>[s.default,i.i18n],isStrictMode:!0}),this)}}t.default=p}),define("discourse/plugins/poll/discourse/components/poll-option-ranked-choice-dropdown",["exports","@glimmer/component","@ember/helper","@ember/object","discourse/components/d-button","discourse/components/dropdown-menu","discourse/float-kit/components/d-menu","discourse/helpers/d-icon","discourse-i18n","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class d extends e.default{onRegisterApi(t){this.dMenu=t}static{dt7948.n(this.prototype,"onRegisterApi",[o.action])}selectRank(t,e){this.args.sendRank(t,e),this.dMenu.close()}static{dt7948.n(this.prototype,"selectRank",[o.action])}get rankLabel(){return 0===this.args.rank?(0,a.i18n)("poll.options.ranked_choice.abstain"):this.args.rank}static{(0,u.setComponentTemplate)((0,p.createTemplateFactory)({id:"oauIHUhI",block:'[[[8,[32,0],null,[["@onRegisterApi"],[[30,0,["onRegisterApi"]]]],[["trigger","content"],[[[[1,"\\n    "],[10,1],[14,0,"d-button-label"],[12],[1,"\\n      "],[1,[30,0,["rankLabel"]]],[1,"\\n    "],[13],[1,"\\n    "],[1,[28,[32,1],["angle-down"],null]],[1,"\\n  "]],[]],[[[1,"\\n    "],[8,[32,2],null,null,[["default"],[[[[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,2]],null]],null],null,[[[1,"        "],[8,[30,1,["item"]],null,null,[["default"],[[[[1,"\\n          "],[8,[32,3],[[24,0,"btn-transparent poll-option-dropdown"]],[["@translatedLabel","@action"],[[30,3,["name"]],[28,[32,4],[[30,0,["selectRank"]],[30,4,["id"]],[30,3,["id"]]],null]]],null],[1,"\\n        "]],[]]]]],[1,"\\n"]],[3]],null],[1,"    "]],[1]]]]],[1,"\\n  "]],[]]]]]],["dropdown","@rankedChoiceDropdownContent","content","@option"],["each","-track-array"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-option-ranked-choice-dropdown.js",scope:()=>[i.default,r.default,n.default,s.default,l.fn],isStrictMode:!0}),this)}}t.default=d}),define("discourse/plugins/poll/discourse/components/poll-option-ranked-choice",["exports","@glimmer/component","@ember/object","@ember/service","discourse/components/d-button","discourse/helpers/route-action","discourse/plugins/poll/discourse/modifiers/decorate-poll-option","discourse/plugins/poll/discourse/components/poll-option-ranked-choice-dropdown","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class p extends e.default{static{dt7948.g(this.prototype,"currentUser",[o.service])}#l=void dt7948.i(this,"currentUser")
sendRank(t,e=0){this.args.sendRank(t,e)}static{dt7948.n(this.prototype,"sendRank",[l.action])}static{(0,a.setComponentTemplate)((0,u.createTemplateFactory)({id:"pwq0SrWw",block:'[[[10,0],[14,"tabindex","0"],[14,0,"ranked-choice-poll-option"],[15,"data-poll-option-id",[30,1,["id"]]],[15,"data-poll-option-rank",[30,1,["rank"]]],[12],[1,"\\n"],[41,[30,0,["currentUser"]],[[[1,"    "],[8,[32,0],null,[["@rank","@option","@rankedChoiceDropdownContent","@sendRank"],[[30,1,["rank"]],[30,1],[30,2],[30,0,["sendRank"]]]],null],[1,"\\n"]],[]],[[[1,"    "],[8,[32,1],[[24,0,"btn-default"]],[["@action","@label"],[[28,[32,2],["showLogin"],null],"poll.options.ranked_choice.login"]],null],[1,"\\n"]],[]]],[1,"  "],[11,1],[24,0,"option-text"],[4,[32,3],[[30,1,["html"]]],null],[12],[13],[1,"\\n"],[13]],["@option","@rankedChoiceDropdownContent"],["if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-option-ranked-choice.js",scope:()=>[r.default,s.default,n.default,i.default],isStrictMode:!0}),this)}}t.default=p}),define("discourse/plugins/poll/discourse/components/poll-options",["exports","@glimmer/component","@ember/helper","@ember/modifier","@ember/object","@ember/service","discourse/helpers/concat-class","discourse/helpers/d-icon","discourse/helpers/route-action","discourse-i18n","discourse/plugins/poll/discourse/modifiers/decorate-poll-option","discourse/plugins/poll/discourse/components/poll-option-ranked-choice","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d,c,h){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class m extends e.default{static{dt7948.g(this.prototype,"currentUser",[n.service])}#l=void dt7948.i(this,"currentUser")
isChosen=t=>this.args.votes.includes(t.id)
sendClick(t,e){e.target.closest(".discourse-local-date")||this.args.sendOptionSelect(t)}static{dt7948.n(this.prototype,"sendClick",[s.action])}sendRank(t,e=0){this.args.sendOptionSelect(t,e)}static{dt7948.n(this.prototype,"sendRank",[s.action])}get rankedChoiceDropdownContent(){let t=[]
return t.push({id:0,name:(0,u.i18n)("poll.options.ranked_choice.abstain")}),this.args.options.forEach((e,l)=>{e.rank=0
let o=""
0===l&&(o=` ${(0,u.i18n)("poll.options.ranked_choice.highest_priority")}`),l===this.args.options.length-1&&(o=` ${(0,u.i18n)("poll.options.ranked_choice.lowest_priority")}`),t.push({id:l+1,name:(l+1).toString()+o})}),t}static{(0,c.setComponentTemplate)((0,h.createTemplateFactory)({id:"zAPu0Lmn",block:'[[[10,"ul"],[15,0,[28,[32,0],[[52,[30,1],"ranked-choice-poll-options"],"options"],null]],[12],[1,"\\n"],[42,[28,[31,2],[[28,[31,2],[[30,2]],null]],null],"rank",[[[41,[30,1],[[[1,"      "],[8,[32,1],null,[["@option","@rankedChoiceDropdownContent","@sendRank"],[[30,3],[30,0,["rankedChoiceDropdownContent"]],[30,0,["sendRank"]]]],null],[1,"\\n"]],[]],[[[1,"      "],[10,"li"],[15,"data-poll-option-id",[30,3,["id"]]],[12],[1,"\\n"],[41,[30,0,["currentUser"]],[[[1,"          "],[11,"button"],[4,[32,2],["click",[28,[32,3],[[30,0,["sendClick"]],[30,3]],null]],null],[12],[1,"\\n"],[41,[28,[30,0,["isChosen"]],[[30,3]],null],[[[41,[30,4],[[[1,"                "],[1,[28,[32,4],["far-square-check"],null]],[1,"\\n"]],[]],[[[1,"                "],[1,[28,[32,4],["circle"],null]],[1,"\\n"]],[]]]],[]],[[[41,[30,4],[[[1,"                "],[1,[28,[32,4],["far-square"],null]],[1,"\\n"]],[]],[[[1,"                "],[1,[28,[32,4],["far-circle"],null]],[1,"\\n"]],[]]]],[]]],[1,"            "],[11,1],[24,0,"option-text"],[4,[32,5],[[30,3,["html"]]],null],[12],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],[[[1,"          "],[11,"button"],[4,[32,2],["click",[28,[32,6],["showLogin"],null]],null],[12],[1,"\\n"],[41,[28,[30,0,["isChosen"]],[[30,3]],null],[[[41,[30,4],[[[1,"                "],[1,[28,[32,4],["far-square-check"],null]],[1,"\\n"]],[]],[[[1,"                "],[1,[28,[32,4],["circle"],null]],[1,"\\n"]],[]]]],[]],[[[41,[30,4],[[[1,"                "],[1,[28,[32,4],["far-square"],null]],[1,"\\n"]],[]],[[[1,"                "],[1,[28,[32,4],["far-circle"],null]],[1,"\\n"]],[]]]],[]]],[1,"            "],[11,1],[24,0,"option-text"],[4,[32,5],[[30,3,["html"]]],null],[12],[13],[1,"\\n          "],[13],[1,"\\n"]],[]]],[1,"      "],[13],[1,"\\n"]],[]]]],[3]],null],[13]],["@isRankedChoice","@options","option","@isCheckbox"],["if","each","-track-array"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-options.js",scope:()=>[i.default,d.default,o.on,l.fn,r.default,p.default,a.default],isStrictMode:!0}),this)}}t.default=m}),define("discourse/plugins/poll/discourse/components/poll-results-pie",["exports","@glimmer/component","@ember/object","@ember/render-modifiers/modifiers/did-insert","@ember/template","ember-modifier","discourse/components/decorated-html","discourse/lib/load-chart-js","discourse/plugins/poll/lib/chart-colors","discourse/plugins/poll/discourse/components/modal/poll-ui-builder","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class c extends e.default{htmlLegendPlugin={id:"htmlLegend",afterUpdate(t,e,l){const o=document.getElementById(l.containerID)
if(!o)return
o.innerHTML=""
t.options.plugins.legend.labels.generateLabels(t).forEach(e=>{const l=document.createElement("li")
l.classList.add("legend"),l.onclick=()=>{t.toggleDataVisibility(e.index),t.update()}
const s=document.createElement("span")
s.classList.add("swatch"),s.style.background=e.fillStyle
const n=document.createElement("span")
n.style.color=e.fontColor,n.innerHTML=e.text,t.getDataVisibility(e.index)?l.style.opacity=1:l.style.opacity=.2,l.appendChild(s),l.appendChild(n),o.appendChild(l)})}}
stripHtml=t=>(new DOMParser).parseFromString(t,"text/html").body.textContent||""
pieChartConfig=(t,e,l={})=>{const o="aspectRatio"in l?l.aspectRatio:2.2,s=e.map(t=>this.stripHtml(t))
return{type:u.PIE_CHART_TYPE,data:{datasets:[{data:t,backgroundColor:(0,a.getColors)(t.length)}],labels:s},plugins:[this.htmlLegendPlugin],options:{responsive:!0,aspectRatio:o,animation:{duration:0},plugins:{legend:{labels:{generateLabels:()=>e.map((e,l)=>({fillStyle:(0,a.getColors)(t.length)[l],text:e,index:l}))},display:!1},htmlLegend:{containerID:l?.legendContainerId}}}}}
registerLegendElement=(0,n.modifier)(t=>{this.legendElement=t})
registerCanvasElement=(0,n.modifier)(t=>{this.canvasElement=t})
get canvasId(){return(0,s.htmlSafe)(`poll-results-chart-${this.args.id}`)}get legendId(){return(0,s.htmlSafe)(`poll-results-legend-${this.args.id}`)}async drawPie(){const t=await(0,r.default)(),e=this.args.options.map(t=>t.votes),l=this.args.options.map(t=>t.html),o=this.pieChartConfig(e,l,{legendContainerId:this.legendElement.id}),s=this.canvasElement
this._chart=new t(s.getContext("2d"),o),(0,i.applyHtmlDecorators)(this.legendElement,i.NULL_HELPER,i.NON_STREAM_HTML_DECORATOR)}static{dt7948.n(this.prototype,"drawPie",[l.action])}static{(0,p.setComponentTemplate)((0,d.createTemplateFactory)({id:"jlDoqufN",block:'[[[10,0],[14,0,"poll-results-chart"],[12],[1,"\\n  "],[11,"canvas"],[16,1,[30,0,["canvasId"]]],[24,0,"poll-results-canvas"],[4,[32,0],[[30,0,["drawPie"]]],null],[4,[32,0],[[30,0,["registerCanvasElement"]]],null],[12],[13],[1,"\\n  "],[11,"ul"],[16,1,[30,0,["legendId"]]],[24,0,"pie-chart-legends"],[4,[32,0],[[30,0,["registerLegendElement"]]],null],[12],[1,"\\n  "],[13],[1,"\\n"],[13]],[],[]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-results-pie.js",scope:()=>[o.default],isStrictMode:!0}),this)}}t.default=c}),define("discourse/plugins/poll/discourse/components/poll-results-ranked-choice",["exports","@glimmer/component","@ember/template","discourse-i18n","discourse/plugins/poll/discourse/modifiers/decorate-cooked-content","discourse/plugins/poll/discourse/modifiers/decorate-poll-option","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class a extends e.default{get rankedChoiceWinnerText(){return(0,l.htmlSafe)((0,o.i18n)("poll.ranked_choice.winner",{count:this.args.rankedChoiceOutcome?.round_activity?.length,winner:this.args.rankedChoiceOutcome?.winning_candidate?.html}))}get rankedChoiceTiedText(){return(0,o.i18n)("poll.ranked_choice.tied",{count:this.args.rankedChoiceOutcome?.round_activity?.length})}static{(0,i.setComponentTemplate)((0,r.createTemplateFactory)({id:"zLotu8MA",block:'[[[10,"h3"],[14,0,"poll-results-ranked-choice-subtitle-rounds"],[12],[1,"\\n  "],[1,[28,[32,0],["poll.ranked_choice.title.rounds"],null]],[1,"\\n"],[13],[1,"\\n"],[10,"table"],[14,0,"poll-results-ranked-choice"],[12],[1,"\\n  "],[10,"thead"],[12],[1,"\\n    "],[10,"tr"],[12],[1,"\\n      "],[10,"th"],[12],[1,[28,[32,0],["poll.ranked_choice.round"],null]],[13],[1,"\\n      "],[10,"th"],[12],[1,[28,[32,0],["poll.ranked_choice.majority"],null]],[13],[1,"\\n      "],[10,"th"],[12],[1,[28,[32,0],["poll.ranked_choice.eliminated"],null]],[13],[1,"\\n    "],[13],[1,"\\n  "],[13],[1,"\\n  "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,1,["round_activity"]]],null]],null],null,[[[41,[30,2,["majority"]],[[[1,"        "],[10,"tr"],[12],[1,"\\n          "],[10,"td"],[12],[1,[30,2,["round"]]],[13],[1,"\\n          "],[11,"td"],[4,[32,1],[[30,2,["majority","html"]]],null],[12],[13],[1,"\\n          "],[10,"td"],[12],[1,[28,[32,0],["poll.ranked_choice.none"],null]],[13],[1,"\\n        "],[13],[1,"\\n"]],[]],[[[1,"        "],[10,"tr"],[12],[1,"\\n          "],[10,"td"],[12],[1,[30,2,["round"]]],[13],[1,"\\n          "],[10,"td"],[12],[1,[28,[32,0],["poll.ranked_choice.none"],null]],[13],[1,"\\n          "],[10,"td"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,2,["eliminated"]]],null]],null],null,[[[1,"              "],[11,1],[4,[32,1],[[30,3,["html"]]],null],[12],[13],[1,"\\n"]],[3]],null],[1,"          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[]]]],[2]],null],[1,"  "],[13],[1,"\\n"],[13],[1,"\\n"],[10,"h3"],[14,0,"poll-results-ranked-choice-subtitle-outcome"],[12],[1,"\\n  "],[1,[28,[32,0],["poll.ranked_choice.title.outcome"],null]],[1,"\\n"],[13],[1,"\\n"],[41,[30,1],[[[41,[30,1,["tied"]],[[[1,"    "],[10,1],[14,0,"poll-results-ranked-choice-info"],[12],[1,[30,0,["rankedChoiceTiedText"]]],[13],[1,"\\n    "],[10,"ul"],[14,0,"poll-results-ranked-choice-tied-candidates"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,1,["tied_candidates"]]],null]],null],null,[[[1,"        "],[11,"li"],[24,0,"poll-results-ranked-choice-tied-candidate"],[4,[32,1],[[30,4,["html"]]],null],[12],[13],[1,"\\n"]],[4]],null],[1,"    "],[13],[1,"\\n"]],[]],[[[1,"    "],[11,1],[24,0,"poll-results-ranked-choice-info"],[4,[32,2],null,null],[12],[1,[30,0,["rankedChoiceWinnerText"]]],[13],[1,"\\n"]],[]]]],[]],null]],["@rankedChoiceOutcome","round","eliminated","tied_candidate"],["each","-track-array","if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-results-ranked-choice.js",scope:()=>[o.i18n,n.default,s.default],isStrictMode:!0}),this)}}t.default=a}),define("discourse/plugins/poll/discourse/components/poll-results-standard",["exports","@glimmer/component","@ember/helper","@ember/template","discourse-i18n","discourse/plugins/poll/lib/even-round","discourse/plugins/poll/discourse/modifiers/decorate-poll-option","discourse/plugins/poll/discourse/components/poll-voters","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class p extends e.default{orderOptions=t=>(t.forEach(t=>{t.votes=t.votes??0}),t.sort((t,e)=>t.votes<e.votes?1:t.votes===e.votes?t.html<e.html?-1:1:-1))
getPercentages=(t,e)=>0===e?Array(t.length).fill(0):t.map(t=>100*t.votes/e)
roundPercentages=t=>this.isMultiple?t.map(Math.floor):(0,n.default)(t)
enrichOptions=(t,e)=>(t.forEach((t,l)=>{const o=e[l].toString(),s=(this.args.vote||[]).includes(t.id)
t.percentage=o,t.chosen=s
let n=this.args.isPublic?this.args.voters?.[t.id]?.voters??[]:[]
t.voters=[...n],t.loading=!!this.args.isPublic&&(this.args.voters?.[t.id]?.loading??!1)}),t)
get votersCount(){return this.args.votersCount||0}get orderedOptions(){const t=this.orderOptions([...this.args.options]),e=this.getPercentages(t,this.votersCount),l=this.roundPercentages(e)
return this.enrichOptions(t,l)}get isMultiple(){return"multiple"===this.args.pollType}static{(0,a.setComponentTemplate)((0,u.createTemplateFactory)({id:"F4qSns2C",block:'[[[10,"ul"],[14,0,"results"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,0,["orderedOptions"]]],null]],null],"voters",[[[1,"    "],[10,"li"],[15,0,[52,[30,1,["chosen"]],"chosen",""]],[12],[1,"\\n      "],[10,0],[14,0,"option"],[12],[1,"\\n        "],[10,2],[12],[1,"\\n"],[41,[51,[30,2]],[[[41,[30,3],[[[1,"              "],[10,1],[14,0,"absolute"],[12],[1,[28,[32,0],["poll.votes"],[["count"],[[30,1,["votes"]]]]]],[13],[1,"\\n"]],[]],[[[1,"              "],[10,1],[14,0,"percentage"],[12],[1,[28,[32,0],["number.percent"],[["count"],[[30,1,["percentage"]]]]]],[13],[1,"\\n"]],[]]]],[]],null],[1,"          "],[11,1],[24,0,"option-text"],[4,[32,1],[[30,1,["html"]]],null],[12],[13],[1,"\\n        "],[13],[1,"\\n"],[41,[51,[30,2]],[[[1,"          "],[10,0],[14,0,"bar-back"],[12],[1,"\\n            "],[10,0],[14,0,"bar"],[15,5,[28,[32,2],[[28,[32,3],["width:",[30,1,["percentage"]],"%"],null]],null]],[12],[13],[1,"\\n          "],[13],[1,"\\n"]],[]],null],[41,[30,4],[[[1,"          "],[8,[32,4],null,[["@postId","@pollType","@optionId","@pollName","@isRankedChoice","@totalVotes","@voters","@fetchVoters","@loading"],[[30,5],[30,6],[30,1,["id"]],[30,7],[30,2],[30,1,["votes"]],[30,1,["voters"]],[30,8],[30,1,["loading"]]]],null],[1,"\\n"]],[]],null],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n"]],[1]],null],[13]],["option","@isRankedChoice","@showTally","@isPublic","@postId","@pollType","@pollName","@fetchVoters"],["each","-track-array","if","unless"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-results-standard.js",scope:()=>[s.i18n,i.default,o.htmlSafe,l.concat,r.default],isStrictMode:!0}),this)}}t.default=p}),define("discourse/plugins/poll/discourse/components/poll-results-tabs",["exports","@glimmer/component","@glimmer/tracking","@ember/helper","@ember/object","discourse/components/d-button","discourse/truth-helpers","discourse-i18n","discourse/plugins/poll/discourse/components/poll-results-ranked-choice","discourse/plugins/poll/discourse/components/poll-results-standard","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class c extends e.default{static{dt7948.g(this.prototype,"activeTab",[l.tracked])}#k=void dt7948.i(this,"activeTab")
tabOne=(0,r.i18n)("poll.results.tabs.votes")
tabTwo=(0,r.i18n)("poll.results.tabs.outcome")
constructor(){super(...arguments),this.activeTab=this.args.isRankedChoice&&this.args.isPublic?this.tabs[1]:this.tabs[0]}get tabs(){let t=[]
return(!this.args.isRankedChoice||this.args.isRankedChoice&&this.args.isPublic)&&t.push(this.tabOne),this.args.isRankedChoice&&t.push(this.tabTwo),t}selectTab(t){this.activeTab=t}static{dt7948.n(this.prototype,"selectTab",[s.action])}static{(0,p.setComponentTemplate)((0,d.createTemplateFactory)({id:"cdHrtEmZ",block:'[[[10,0],[14,0,"tab-container"],[12],[1,"\\n  "],[10,"ul"],[14,0,"tabs nav nav-items"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,0,["tabs"]]],null]],null],null,[[[1,"      "],[10,"li"],[15,0,[29,["tab nav-item ",[52,[28,[32,0],[[30,1],[30,0,["activeTab"]]],null],"active"]]]],[12],[1,"\\n        "],[8,[32,1],[[24,0,"nav-btn"]],[["@action"],[[28,[32,2],[[30,0,["selectTab"]],[30,1]],null]]],[["default"],[[[[1,"\\n          "],[1,[30,1]],[1,"\\n        "]],[]]]]],[1,"\\n      "],[13],[1,"\\n"]],[1]],null],[1,"  "],[13],[1,"\\n  "],[10,0],[14,0,"tab-content"],[12],[1,"\\n"],[41,[28,[32,0],[[30,0,["activeTab"]],[30,0,["tabOne"]]],null],[[[1,"      "],[8,[32,3],null,[["@options","@pollName","@pollType","@isPublic","@isRankedChoice","@postId","@vote","@voters","@votersCount","@fetchVoters","@showTally"],[[30,2],[30,3],[30,4],[30,5],[30,6],[30,7],[30,8],[30,9],[30,10],[30,11],[30,12]]],null],[1,"\\n"]],[]],null],[1,"\\n"],[41,[28,[32,0],[[30,0,["activeTab"]],[30,0,["tabTwo"]]],null],[[[1,"      "],[8,[32,4],null,[["@rankedChoiceOutcome"],[[30,13]]],null],[1,"\\n"]],[]],null],[1,"  "],[13],[1,"\\n"],[13]],["tab","@options","@pollName","@pollType","@isPublic","@isRankedChoice","@postId","@vote","@voters","@votersCount","@fetchVoters","@showTally","@rankedChoiceOutcome"],["each","-track-array","if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-results-tabs.js",scope:()=>[i.eq,n.default,o.fn,u.default,a.default],isStrictMode:!0}),this)}}t.default=c}),define("discourse/plugins/poll/discourse/components/poll-voters-ranked-choice",["exports","@glimmer/component","discourse/helpers/bound-avatar-template","discourse/helpers/d-icon","discourse/truth-helpers","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class r extends e.default{groupVotersByRank=t=>t.reduce((t,e)=>{const l=e.rank
return t[l]??=[],t[l].push(e),t},{})
get rankedChoiceVoters(){const t=[...this.args.voters],e=this.groupVotersByRank(t)
return Object.keys(e).map(t=>({rank:t,voters:e[t]}))}static{(0,n.setComponentTemplate)((0,i.createTemplateFactory)({id:"sch9560c",block:'[[[42,[28,[31,1],[[28,[31,1],[[30,0,["rankedChoiceVoters"]]],null]],null],null,[[[1,"  "],[10,"ul"],[12],[1,"\\n"],[41,[28,[32,0],[[30,1,["rank"]],"Abstain"],null],[[[1,"      "],[10,1],[14,0,"rank"],[12],[1,[28,[32,1],["ban"],null]],[13],[1,"\\n"]],[]],[[[1,"      "],[10,1],[14,0,"rank"],[12],[1,[30,1,["rank"]]],[13],[1,"\\n"]],[]]],[42,[28,[31,1],[[28,[31,1],[[30,1,["voters"]]],null]],null],null,[[[1,"      "],[10,"li"],[12],[1,"\\n        "],[10,3],[15,"data-user-card",[30,2,["user","username"]]],[15,"title",[30,2,["user","username"]]],[12],[1,"\\n          "],[1,[28,[32,2],[[30,2,["user","avatar_template"]],"tiny"],null]],[1,"\\n        "],[13],[1,"\\n      "],[13],[1,"\\n"]],[2]],null],[1,"  "],[13],[1,"\\n"]],[1]],null]],["rank","voter"],["each","-track-array","if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-voters-ranked-choice.js",scope:()=>[s.eq,o.default,l.default],isStrictMode:!0}),this)}}t.default=r}),define("discourse/plugins/poll/discourse/components/poll-voters",["exports","@glimmer/component","@ember/helper","discourse/components/conditional-loading-spinner","discourse/components/d-button","discourse/helpers/bound-avatar-template","discourse/plugins/poll/discourse/components/poll-voters-ranked-choice","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
class u extends e.default{get showMore(){return this.args.voters.length<this.args.totalVotes}static{(0,r.setComponentTemplate)((0,a.createTemplateFactory)({id:"FQzmuaTe",block:'[[[10,0],[14,0,"poll-voters"],[12],[1,"\\n  "],[10,"ul"],[14,0,"poll-voters-list"],[12],[1,"\\n"],[41,[30,1],[[[1,"      "],[8,[32,0],null,[["@voters"],[[30,2]]],null],[1,"\\n"]],[]],[[[42,[28,[31,2],[[28,[31,2],[[30,2]],null]],null],null,[[[1,"        "],[10,"li"],[12],[1,"\\n          "],[10,3],[15,"data-user-card",[30,3,["username"]]],[15,"title",[30,3,["username"]]],[12],[1,"\\n            "],[1,[28,[32,1],[[30,3,["avatar_template"]],"tiny"],null]],[1,"\\n          "],[13],[1,"\\n        "],[13],[1,"\\n"]],[3]],null]],[]]],[1,"  "],[13],[1,"\\n"],[41,[30,0,["showMore"]],[[[1,"    "],[8,[32,2],null,[["@condition"],[[30,4]]],[["default"],[[[[1,"\\n      "],[8,[32,3],[[24,0,"poll-voters-toggle-expand"]],[["@action","@icon"],[[28,[32,4],[[30,5],[30,6]],null],"chevron-down"]],null],[1,"\\n    "]],[]]]]],[1,"\\n"]],[]],null],[13]],["@isRankedChoice","@voters","user","@loading","@fetchVoters","@optionId"],["if","each","-track-array"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll-voters.js",scope:()=>[i.default,n.default,o.default,s.default,l.fn],isStrictMode:!0}),this)}}t.default=u}),define("discourse/plugins/poll/discourse/components/poll",["exports","@glimmer/component","@glimmer/tracking","@ember/modifier","@ember/object","@ember/render-modifiers/modifiers/did-update","@ember/service","@ember/template","@ember-compat/tracked-built-ins","discourse/helpers/d-icon","discourse/lib/ajax","discourse/lib/ajax-error","discourse/lib/round","discourse-i18n","discourse/plugins/poll/discourse/components/modal/poll-breakdown","discourse/plugins/poll/discourse/components/modal/poll-ui-builder","discourse/plugins/poll/discourse/components/poll-buttons-dropdown","discourse/plugins/poll/discourse/components/poll-info","discourse/plugins/poll/discourse/components/poll-options","discourse/plugins/poll/discourse/components/poll-results-pie","discourse/plugins/poll/discourse/components/poll-results-tabs","@ember/component","@ember/template-factory"],function(t,e,l,o,s,n,i,r,a,u,p,d,c,h,m,g,f,b,v,_,y,k,w){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
const C="staff_only",O="ranked_choice",x="on_close",T="closed"
class M extends e.default{static{dt7948.g(this.prototype,"currentUser",[i.service])}#l=void dt7948.i(this,"currentUser")
static{dt7948.g(this.prototype,"siteSettings",[i.service])}#e=void dt7948.i(this,"siteSettings")
static{dt7948.g(this.prototype,"router",[i.service])}#w=void dt7948.i(this,"router")
static{dt7948.g(this.prototype,"appEvents",[i.service])}#C=void dt7948.i(this,"appEvents")
static{dt7948.g(this.prototype,"dialog",[i.service])}#t=void dt7948.i(this,"dialog")
static{dt7948.g(this.prototype,"modal",[i.service])}#O=void dt7948.i(this,"modal")
static{dt7948.g(this.prototype,"preloadedVoters",[l.tracked],function(){return this.defaultPreloadedVoters()})}#x=void dt7948.i(this,"preloadedVoters")
static{dt7948.g(this.prototype,"voterListExpanded",[l.tracked],function(){return!1})}#T=void dt7948.i(this,"voterListExpanded")
static{dt7948.g(this.prototype,"vote",[l.tracked],function(){return this.args.post.polls_votes?.[this.args.poll.name]||[]})}#M=void dt7948.i(this,"vote")
static{dt7948.g(this.prototype,"hasSavedVote",[l.tracked],function(){return this.vote.length>0})}#P=void dt7948.i(this,"hasSavedVote")
static{dt7948.g(this.prototype,"showResults",[l.tracked],function(){return!(this.poll.results===x&&!this.closed)&&(this.hasSavedVote||this.topicArchived&&!this.staffOnly||this.closed&&!this.staffOnly)})}#R=void dt7948.i(this,"showResults")
static{dt7948.g(this.prototype,"showTally",[l.tracked],function(){return!1})}#S=void dt7948.i(this,"showTally")
checkUserGroups=(t,e)=>{const l=e&&e.groups&&e.groups.split(",").map(t=>t.toLowerCase())
if(!l)return!0
const o=t&&t.groups&&t.groups.map(t=>t.name.toLowerCase())
return o&&l.some(t=>o.includes(t))}
areRanksValid=t=>{let e=new Set,l=!1,o=!0
return t.forEach(t=>{const s=t.rank
if(0!==s){if(o=!1,e.has(s))return void(l=!0)
e.add(s)}}),!l&&!o}
_toggleOption=(t,e=0)=>{if(this.isMultiple){const e=this.vote.indexOf(t.id);-1!==e?this.vote.splice(e,1):this.vote.push(t.id)}else this.isRankedChoice?this.options.forEach(l=>{const o=this.vote.findIndex(t=>t.digest===l.id);-1===o?this.vote.push({digest:l.id,rank:l.id===t?e:0}):l.id===t&&(this.vote[o].rank=e)}):this.vote=[t.id]
this.vote=[...this.vote]}
get poll(){return this.args.poll}defaultPreloadedVoters(){const t={}
return this.poll.public&&this.poll.preloaded_voters&&Object.keys(this.poll.preloaded_voters).forEach(e=>{t[e]={voters:this.poll.preloaded_voters[e],loading:!1}}),this.options.forEach(e=>{t[e.id]||(t[e.id]={voters:[],loading:!1})}),t}get id(){return`${this.args.poll.name}-${this.args.post.id}`}get post(){return this.args.post}get groupableUserFields(){return this.siteSettings.poll_groupable_user_fields.split("|").filter(Boolean)}get isStaff(){return this.currentUser?.staff}get titleHTML(){return(0,r.htmlSafe)(this.args.titleHTML)}get topicArchived(){return this.post.get("topic.archived")}get isRankedChoice(){return this.poll.type===O}get staffOnly(){return this.poll.results===C}get isMultiple(){return"multiple"===this.poll.type}get isNumber(){return"number"===this.poll.type}get isMe(){return this.currentUser&&this.post.user_id===this.currentUser.id}get status(){return this.poll.status}async castVotes(t){if(this.canCastVotes&&this.currentUser)try{const{poll:t}=await(0,p.ajax)("/polls/vote",{type:"PUT",data:{post_id:this.post.id,poll_name:this.poll.name,options:this.vote}})
this.hasSavedVote=!0,this.args.post.polls_votes||(this.args.post.polls_votes=new a.TrackedObject),this.args.post.polls_votes[this.poll.name]=this.vote,Object.assign(this.poll,t),this.appEvents.trigger("poll:voted",t,this.post,this.vote),this.poll.results!==x&&(this.showResults=!0),this.poll.results===C&&(this.currentUser&&this.currentUser.staff?this.showResults=!0:this.showResults=!1)}catch(e){e?(this.isMultiple||this.isRankedChoice||this._toggleOption(t),(0,d.popupAjaxError)(e)):this.dialog.alert((0,h.i18n)("poll.error_while_casting_votes"))}}static{dt7948.n(this.prototype,"castVotes",[s.action])}get options(){let t=this.poll.options
return this.isRankedChoice&&t.forEach(t=>{const e=this.vote.findIndex(e=>e.digest===t.id)
t.rank=-1===e?0:this.vote[e].rank}),t}get voters(){return this.poll.voters}get rankedChoiceOutcome(){return this.poll.ranked_choice_outcome||null}get min(){let t=parseInt(this.poll.min,10)
return(isNaN(t)||t<0)&&(t=1),t}get max(){let t=parseInt(this.poll.max,10)
const e=this.poll.options.length
return(isNaN(t)||t>e)&&(t=e),t}get closed(){return this.status===T||this.isAutomaticallyClosed}get isAutomaticallyClosed(){return(this.poll.close??!1)&&moment.utc(this.poll.close,"YYYY-MM-DD HH:mm:ss Z")<=moment()}get hasVoted(){return this.vote?.length>0}get hideResultsDisabled(){return!this.staffOnly&&(this.closed||this.topicArchived)}toggleOption(t,e=0){if(!this.closed&&this.currentUser&&this.checkUserGroups(this.currentUser,this.poll)){if(!this.isMultiple&&!this.isRankedChoice&&1===this.vote.length&&this.vote[0]===t.id)return this.removeVote()
this.isMultiple||this.isRankedChoice||(this.vote.length=0),this._toggleOption(t,e),this.isMultiple||this.isRankedChoice||this.castVotes(t)}}static{dt7948.n(this.prototype,"toggleOption",[s.action])}toggleResults(){this.showResults=!this.showResults}static{dt7948.n(this.prototype,"toggleResults",[s.action])}get canCastVotes(){if(this.closed||!this.currentUser)return!1
const t=this.vote?.length||0
return this.isMultiple?t>=this.min&&t<=this.max:this.isRankedChoice?this.options.length===this.vote?.length&&this.areRanksValid(this.vote):t>0}get notInVotingGroup(){return!this.checkUserGroups(this.currentUser,this.poll)}get pollGroups(){return(0,h.i18n)("poll.results.groups.title",{groups:this.poll.groups})}get showCastVotesButton(){return(this.isMultiple||this.isRankedChoice)&&!this.showResults}get castVotesButtonClass(){return"btn cast-votes "+(this.canCastVotes?"btn-primary":"btn-default")}get castVotesButtonIcon(){return this.castVotesDisabled?"far-square":"check"}get castVotesDisabled(){return!this.canCastVotes}get showHideResultsButton(){return this.showResults&&!this.hideResultsDisabled}get showShowResultsButton(){return!(this.showResults||this.hideResultsDisabled||"on_vote"===this.poll.results&&!this.hasSavedVote&&!this.isMe||this.poll.results===x&&!this.closed||this.poll.results===C&&!this.isStaff||!(this.voters>0))}get showRemoveVoteButton(){return!this.showResults&&!this.closed&&!this.hideResultsDisabled&&this.hasSavedVote}get isCheckbox(){return this.isMultiple}get resultsWidgetTypeClass(){const t=this.poll.type
return this.isNumber||this.poll.chart_type!==g.PIE_CHART_TYPE?`discourse-poll-${t}-results`:"discourse-poll-pie-chart"}get resultsPie(){return this.poll.chart_type===g.PIE_CHART_TYPE}get averageRating(){const t=this.options.reduce((t,e)=>t+parseInt(e.html,10)*parseInt(e.votes,10),0),e=0===this.voters?0:(0,c.default)(t/this.voters,-2)
return(0,r.htmlSafe)((0,h.i18n)("poll.average_rating",{average:e}))}get availableDisplayMode(){return this.showResults&&this.poll.chart_type!==g.PIE_CHART_TYPE&&[g.REGULAR_POLL_TYPE,g.MULTIPLE_POLL_TYPE].includes(this.poll.type)?this.showTally?"showPercentage":"showTally":null}updatedVoters(){this.voterListExpanded||(this.preloadedVoters=this.defaultPreloadedVoters())}static{dt7948.n(this.prototype,"updatedVoters",[s.action])}fetchVoters(t){let e,l=this.preloadedVoters
t?(l[t].loading=!0,e=l[t]?.voters):e=l,this.preloadedVoters={...l}
const o=e?.length
return(0,p.ajax)("/polls/voters.json",{data:{post_id:this.post.id,poll_name:this.poll.name,option_id:t,page:Math.floor(o/25)+1,limit:25}}).then(o=>{this.voterListExpanded=!0
const s=t?o.voters[t]:o.voters
let n=new Set([])
this.isRankedChoice?(n=new Set(e.map(t=>t.user.username)),s.forEach(t=>{n.has(t.user.username)||(n.add(t.user.username),e.push(t))})):(n=new Set(e.map(t=>t.username)),s.forEach(t=>{n.has(t.username)||(n.add(t.username),e.push(t))}),"regular"===this.poll.type&&Object.keys(l).forEach(e=>{t!==e&&(l[e].voters=l[e].voters.filter(t=>!n.has(t.username)))}))}).catch(t=>{t?(0,d.popupAjaxError)(t):this.dialog.alert((0,h.i18n)("poll.error_while_fetching_voters"))}).finally(()=>{t&&(l[t].loading=!1),this.preloadedVoters={...l}})}static{dt7948.n(this.prototype,"fetchVoters",[s.action])}dropDownClick(t){this[t]()}static{dt7948.n(this.prototype,"dropDownClick",[s.action])}removeVote(){return(0,p.ajax)("/polls/vote",{type:"DELETE",data:{post_id:this.post.id,poll_name:this.poll.name}}).then(({poll:t})=>{this.poll.type===O&&t.options.forEach(t=>{t.rank=0}),this.vote=Object.assign([]),this.hasSavedVote=!1,this.args.post.polls_votes&&delete this.args.post.polls_votes[this.poll.name],this.appEvents.trigger("poll:voted",t,this.post,this.vote),this.showResults=!1}).catch(t=>(0,d.popupAjaxError)(t))}static{dt7948.n(this.prototype,"removeVote",[s.action])}toggleStatus(){this.isAutomaticallyClosed||this.dialog.yesNoConfirm({message:(0,h.i18n)(this.closed?"poll.open.confirm":"poll.close.confirm"),didConfirm:()=>{const t=this.closed?"open":T;(0,p.ajax)("/polls/toggle_status",{type:"PUT",data:{post_id:this.post.id,poll_name:this.poll.name,status:t}}).then(()=>{this.poll.status=t,this.poll.results!==x&&"always"!==this.poll.results||(this.showResults=this.status===T),this.poll.results===x&&this.status===T&&this.router.refresh()}).catch(t=>{t?(0,d.popupAjaxError)(t):this.dialog.alert((0,h.i18n)("poll.error_while_toggling_status"))})}})}static{dt7948.n(this.prototype,"toggleStatus",[s.action])}showBreakdown(){this.modal.show(m.default,{model:{poll:this.poll,post:this.post}})}static{dt7948.n(this.prototype,"showBreakdown",[s.action])}exportResults(){const t=this.poll.type===O?this.siteSettings.poll_export_ranked_choice_data_explorer_query_id:this.siteSettings.poll_export_data_explorer_query_id;(0,p.ajax)(`/admin/plugins/explorer/queries/${t}/run.csv`,{type:"POST",data:{params:JSON.stringify({poll_name:this.poll.name,post_id:this.post.id.toString()}),explain:!1,limit:1e6,download:1}}).then(t=>{const e=document.createElement("a"),l=new Blob([t],{type:"text/csv;charset=utf-8;"})
e.href=URL.createObjectURL(l),e.setAttribute("download",`poll-export-${this.poll.name}-${this.post.id}.csv`),e.click(),e.remove()}).catch(t=>{t?(0,d.popupAjaxError)(t):this.dialog.alert((0,h.i18n)("poll.error_while_exporting_results"))})}static{dt7948.n(this.prototype,"exportResults",[s.action])}toggleDisplayMode(){this.showTally=!this.showTally}static{dt7948.n(this.prototype,"toggleDisplayMode",[s.action])}static{(0,k.setComponentTemplate)((0,w.createTemplateFactory)({id:"ejUPG0qb",block:'[[[10,0],[14,0,"poll"],[12],[1,"\\n  "],[11,0],[24,0,"poll-container"],[4,[32,0],[[30,0,["updatedVoters"]],[30,0,["poll","preloaded_voters"]]],null],[12],[1,"\\n    "],[1,[30,0,["titleHTML"]]],[1,"\\n"],[41,[30,0,["notInVotingGroup"]],[[[1,"      "],[10,0],[14,0,"alert alert-danger"],[12],[1,[30,0,["pollGroups"]]],[13],[1,"\\n"]],[]],null],[41,[30,0,["showResults"]],[[[1,"      "],[10,0],[15,0,[30,0,["resultsWidgetTypeClass"]]],[12],[1,"\\n"],[41,[30,0,["isNumber"]],[[[1,"          "],[10,1],[12],[1,[30,0,["averageRating"]]],[13],[1,"\\n"]],[]],[[[41,[30,0,["resultsPie"]],[[[1,"            "],[8,[32,1],null,[["@id","@options"],[[30,0,["id"]],[30,0,["options"]]]],null],[1,"\\n"]],[]],[[[1,"            "],[8,[32,2],null,[["@options","@pollName","@pollType","@isRankedChoice","@isPublic","@postId","@vote","@voters","@votersCount","@fetchVoters","@rankedChoiceOutcome","@showTally"],[[30,0,["options"]],[30,0,["poll","name"]],[30,0,["poll","type"]],[30,0,["isRankedChoice"]],[30,0,["poll","public"]],[30,0,["post","id"]],[30,0,["vote"]],[30,0,["preloadedVoters"]],[30,0,["poll","voters"]],[30,0,["fetchVoters"]],[30,0,["rankedChoiceOutcome"]],[30,0,["showTally"]]]],null],[1,"\\n"]],[]]]],[]]],[1,"      "],[13],[1,"\\n"]],[]],[[[1,"      "],[8,[32,3],null,[["@isCheckbox","@isRankedChoice","@options","@votes","@sendOptionSelect"],[[30,0,["isCheckbox"]],[30,0,["isRankedChoice"]],[30,0,["options"]],[30,0,["vote"]],[30,0,["toggleOption"]]]],null],[1,"\\n"]],[]]],[1,"  "],[13],[1,"\\n  "],[8,[32,4],null,[["@options","@min","@max","@isMultiple","@close","@closed","@results","@showResults","@postUserId","@isPublic","@isDynamic","@hasVoted","@voters"],[[30,0,["options"]],[30,0,["min"]],[30,0,["max"]],[30,0,["isMultiple"]],[30,0,["close"]],[30,0,["closed"]],[30,0,["poll","results"]],[30,0,["showResults"]],[30,0,["poll","post","user_id"]],[30,0,["poll","public"]],[52,[30,1],true,[30,0,["poll","dynamic"]]],[30,0,["hasVoted"]],[30,0,["voters"]]]],null],[1,"\\n  "],[10,0],[14,0,"poll-buttons"],[12],[1,"\\n"],[41,[30,0,["showCastVotesButton"]],[[[1,"      "],[11,"button"],[16,0,[30,0,["castVotesButtonClass"]]],[16,"title",[28,[32,5],["poll.cast-votes.title"],null]],[16,"disabled",[30,0,["castVotesDisabled"]]],[4,[32,6],["click",[30,0,["castVotes"]]],null],[12],[1,"\\n        "],[1,[28,[32,7],[[30,0,["castVotesButtonIcon"]]],null]],[1,"\\n        "],[10,1],[14,0,"d-button-label"],[12],[1,[28,[32,5],["poll.cast-votes.label"],null]],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showHideResultsButton"]],[[[1,"      "],[11,"button"],[24,0,"btn btn-default toggle-results"],[16,"title",[28,[32,5],["poll.hide-results.title"],null]],[4,[32,6],["click",[30,0,["toggleResults"]]],null],[12],[1,"\\n        "],[1,[28,[32,7],["chevron-left"],null]],[1,"\\n        "],[10,1],[14,0,"d-button-label"],[12],[1,[28,[32,5],["poll.hide-results.label"],null]],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showShowResultsButton"]],[[[1,"      "],[11,"button"],[24,0,"btn btn-default toggle-results"],[16,"title",[28,[32,5],["poll.show-results.title"],null]],[4,[32,6],["click",[30,0,["toggleResults"]]],null],[12],[1,"\\n        "],[1,[28,[32,7],["chart-bar"],null]],[1,"\\n        "],[10,1],[14,0,"d-button-label"],[12],[1,[28,[32,5],["poll.show-results.label"],null]],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n"],[41,[30,0,["showRemoveVoteButton"]],[[[1,"      "],[11,"button"],[24,0,"btn btn-default remove-vote"],[16,"title",[28,[32,5],["poll.remove-vote.title"],null]],[4,[32,6],["click",[30,0,["removeVote"]]],null],[12],[1,"\\n        "],[1,[28,[32,7],["arrow-rotate-left"],null]],[1,"\\n        "],[10,1],[14,0,"d-button-label"],[12],[1,[28,[32,5],["poll.remove-vote.label"],null]],[13],[1,"\\n      "],[13],[1,"\\n"]],[]],null],[1,"\\n    "],[8,[32,8],null,[["@closed","@voters","@isStaff","@isMe","@isRankedChoice","@topicArchived","@groupableUserFields","@isAutomaticallyClosed","@dropDownClick","@availableDisplayMode"],[[30,0,["closed"]],[30,0,["voters"]],[30,0,["isStaff"]],[30,0,["isMe"]],[30,0,["isRankedChoice"]],[30,0,["topicArchived"]],[30,0,["groupableUserFields"]],[30,0,["isAutomaticallyClosed"]],[30,0,["dropDownClick"]],[30,0,["availableDisplayMode"]]]],null],[1,"\\n  "],[13],[1,"\\n"],[13]],["@isDynamic"],["if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/components/poll.js",scope:()=>[n.default,_.default,y.default,v.default,b.default,h.i18n,o.on,u.default,f.default],isStrictMode:!0}),this)}}t.default=M}),define("discourse/plugins/poll/discourse/initializers/add-poll-ui-builder",["exports","discourse/lib/plugin-api","discourse/plugins/poll/lib/rich-editor-extension","discourse/plugins/poll/discourse/components/modal/poll-ui-builder"],function(t,e,l,o){"use strict"
function s(t){t.addComposerToolbarPopupMenuOption({action:e=>{t.container.lookup("service:modal").show(o.default,{model:{toolbarEvent:e}})},icon:"chart-bar",label:"poll.ui_builder.title",condition:e=>{const l=t.container.lookup("service:site-settings"),o=t.getCurrentUser()
return l.poll_enabled&&(e.model.topic?.pm_with_non_human_user||o&&(o.staff||o.can_create_poll))}}),t.registerRichEditorExtension(l.default)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
t.default={name:"add-poll-ui-builder",initialize(){(0,e.withPluginApi)(s)}}}),define("discourse/plugins/poll/discourse/initializers/extend-for-poll",["exports","@glimmer/tracking","@ember/object","@ember-compat/tracked-built-ins","discourse/lib/decorators","discourse/lib/plugin-api","discourse/plugins/poll/discourse/components/modal/poll-ui-builder","discourse/plugins/poll/discourse/components/poll","@ember/component","@ember/template-factory","@ember/component/template-only"],function(t,e,l,o,s,n,i,r,a,u,p){"use strict"
function d(t,e){let s=[...t.querySelectorAll(".poll")]
if(s=s.filter(t=>"BLOCKQUOTE"!==t.parentNode.tagName),!s.length||!e)return
const n=e.getModel(),d=n.pollsObject
s.forEach(t=>{const s=t.dataset.pollName
let c=d[s],h=n
const m=t.closest(".expanded-quote")?.dataset.postId
if(m&&n.quoted[m]&&(h=l.default.create(n.quoted[m]),c=new o.TrackedObject(h.polls.find(t=>t.name===s))),c){const l=t.querySelector(".poll-title")?.outerHTML,o="true"===t.dataset.pollDynamic,s=document.createElement("div")
Object.assign(s.dataset,{pollName:c.name,pollType:c.type}),s.classList.add("poll-outer"),c.chart_type===i.PIE_CHART_TYPE&&s.classList.add("pie"),t.replaceWith(s),e.renderGlimmer(s,(0,a.setComponentTemplate)((0,u.createTemplateFactory)({id:"KZrO9x9w",block:'[[[8,[32,0],null,[["@poll","@post","@titleHTML","@isDynamic"],[[32,1],[32,2],[32,3],[52,[32,4],true,[32,1,["dynamic"]]]]],null]],[],["if"]]',moduleName:"/var/www/discourse/frontend/discourse/discourse/plugins/poll/discourse/initializers/extend-for-poll.js",scope:()=>[r.default,c,n,l,o],isStrictMode:!0}),(0,p.default)(void 0,void 0)))}})}function c(t){t.modifyClass("controller:topic",t=>class extends t{subscribe(){super.subscribe(...arguments),this.messageBus.subscribe(`/polls/${this.model.id}`,this._onPollMessage)}unsubscribe(){this.messageBus.unsubscribe("/polls/*",this._onPollMessage),super.unsubscribe(...arguments)}_onPollMessage(t){const e=this.get("model.postStream").findLoadedPost(t.post_id)
e&&(e.polls=t.polls)}static{dt7948.n(this.prototype,"_onPollMessage",[s.bind])}}),t.modifyClass("model:post",t=>class extends t{static{dt7948.g(this.prototype,"polls_votes",[e.tracked],function(){return new o.TrackedObject})}#V=void dt7948.i(this,"polls_votes")
static{dt7948.g(this.prototype,"pollsObject",[e.tracked],function(){return new o.TrackedObject})}#E=void dt7948.i(this,"pollsObject")
static{dt7948.g(this.prototype,"_polls",[e.tracked])}#j=void dt7948.i(this,"_polls")
get polls(){return this._polls}set polls(t){this._polls=t,this._refreshPollsObject()}_refreshPollsObject(){for(const t of this.polls){const e=t.name
this.pollsObject[e]||=new o.TrackedObject,Object.assign(this.pollsObject[e],t)}}}),t.decorateCookedElement(d,{onlyStream:!0})
t.container.lookup("service:site-settings").poll_enabled&&t.addSearchSuggestion("in:polls")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
t.default={name:"extend-for-poll",initialize(){(0,n.withPluginApi)(c)}}}),define("discourse/plugins/poll/discourse/initializers/poll-admin-plugin-configuration-nav",["exports","discourse/lib/plugin-api"],function(t,e){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
t.default={name:"poll-admin-plugin-configuration-nav",initialize(t){const l=t.lookup("service:current-user")
l?.admin&&(0,e.withPluginApi)(t=>{t.setAdminPluginIcon("poll","chart-bar")})}}}),define("discourse/plugins/poll/discourse/modifiers/decorate-cooked-content",["exports","ember-modifier","discourse/components/decorated-html"],function(t,e,l){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
t.default=(0,e.modifier)(t=>{const e=(0,l.applyHtmlDecorators)(t,l.NULL_HELPER,l.NON_STREAM_HTML_DECORATOR)
return()=>e.forEach(t=>t())})}),define("discourse/plugins/poll/discourse/modifiers/decorate-poll-option",["exports","ember-modifier","discourse/components/decorated-html"],function(t,e,l){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
t.default=(0,e.modifier)((t,[e])=>{if(!e)return
t.innerHTML=e
const o=(0,l.applyHtmlDecorators)(t,l.NULL_HELPER,l.NON_STREAM_HTML_DECORATOR)
return()=>o.forEach(t=>t())})}),define("discourse/plugins/poll/lib/chart-colors",["exports"],function(t){"use strict"
function e(t){return getComputedStyle(document.documentElement).getPropertyValue(t).trim()||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getColors=function(t,l){const o=[]
for(let n=1;n<=t;n++){const t=e(`--poll-pie-color-${n}`)
t&&o.push(t)}if(o.length>=t)return o.slice(0,t)
const s=function(t,e){let l
switch(e=e||"cool"){case"cool":l={0:[255,255,255],25:[220,237,200],50:[66,179,213],75:[26,39,62],100:[0,0,0]}
break
case"warm":l={0:[255,255,255],25:[254,235,101],50:[228,82,27],75:[77,52,47],100:[0,0,0]}}let o,s,n=Object.keys(l),i=[]
for(let r=0;r<t;r++){let e
o=(r+1)*(100/(t+1)),s=s||0
for(let t=s;t<n.length;t++){if(!n[t+1]){e=t-1
break}if(o>=n[t]&&o<n[t+1]){e=t
break}}let a=(o-n[e])/(n[e+1]-n[e]),u=[]
for(let t=0;t<3;t++)u.push(Math.round(l[n[e]][t]-(l[n[e]][t]-l[n[e+1]][t])*a))
i.push(`rgb(${u.toString()})`),s=e}return i}(t-o.length,l)
return[...o,...s]}}),define("discourse/plugins/poll/lib/discourse-markdown/poll",["exports","discourse-i18n"],function(t,e){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.setup=function(t){t.allowList(["a.button.cast-votes","a.button.toggle-results","div.poll-buttons","div.poll-container","div.poll-info_counts-count","div.poll-info_counts","div.poll-info","div.poll-title","div.poll","div[data-*]","li[data-*]","span.info-label","span.info-number","span.info-text"]),t.registerOptions((t,e)=>{t.features.poll=e.poll_enabled,t.pollMaximumOptions=e.poll_maximum_options}),t.registerPlugin(t=>t.block.bbcode.ruler.push("poll",n))}
/*!
   * Joseph Myer's md5() algorithm wrapped in a self-invoked function to prevent
   * global namespace pollution, modified to hash unicode characters as UTF-8.
   *
   * Copyright 1999-2010, Joseph Myers, Paul Johnston, Greg Holt, Will Bond <will@wbond.net>
   * http://www.myersdaily.org/joseph/javascript/md5-text.html
   * http://pajhome.org.uk/crypt/md5
   *
   * Released under the BSD license
   * http://www.opensource.org/licenses/bsd-license
   */
const l="data-poll-",o={name:"poll",status:"open"},s=["chartType","close","groups","max","min","name","order","public","results","status","step","type","dynamic"]
const n={tag:"poll",before(t,{attrs:e}){t.tokens.filter(t=>"poll_open"===t.type).length>t.tokens.filter(t=>"poll_close"===t.type).length||(t.push("poll_open","div",1).poll_attrs={...o,...e})},after(t,o){if("poll_open"!==o.type)return
let n=o.poll_attrs,i=t.tokens.indexOf(o),r=t.tokens.slice(i+1),a=[]
if(r.length>0&&"heading_open"===r[0].type){let e=r.findIndex(t=>"heading_close"===t.type);-1!==e&&(a=r.splice(0,e+1).slice(1,-1),t.tokens.splice(i+1,e+1))}if("number"===n.type){let e=parseInt(n.min,10),l=parseInt(n.max,10),o=parseInt(n.step,10)
if(isNaN(e)&&(e=1),isNaN(l)&&(l=t.md.options.discourse.pollMaximumOptions),(isNaN(o)||o<1)&&(o=1),r.length>0)return void t.tokens.splice(i,1)
e<=l&&function(t,e,l,o,s){e.push(new t.Token("bullet_list_open","ul",1))
for(let n=l;n<=o;n+=s){e.push(new t.Token("list_item_open","li",1))
let l=new t.Token("text","",0)
l.content=String(n),e.push(l),e.push(new t.Token("list_item_close","li",-1))}e.push(new t.Token("bullet_list_close","ul",-1))}(t,r,e,l,o)}t.tokens.splice(i+1),o.attrs||=[],o.attrs.push(["class","poll"])
for(let e of s)n[e]&&o.attrs.push([l+e,n[e]])
r.length>0&&!r[0].type.endsWith("_list_open")||(function(t,e,o){let s=t.push("poll_container_open","div",1)
s.attrs=[["class","poll-container"]],e.length>0&&(s=t.push("poll_title_open","div",1),s.attrs=[["class","poll-title"]],t.tokens.push(...e),t.push("poll_title_close","div",-1))
for(let n=0;n<o.length;n++)if("list_item_open"===o[n].type){let t=o.findIndex((t,e)=>e>n&&"list_item_close"===t.type)
if(-1===t)continue
let e=o.slice(n,t+1).filter(t=>"text"===t.type||"inline"===t.type).map(t=>t.content).join(" "),s=f(JSON.stringify([e]))
o[n].attrs||=[],o[n].attrs.push([l+"option-id",s])}t.tokens.push(...o),t.push("poll_container_close","div",-1)}(t,a,r),function(t){let l=t.push("poll_info_open","div",1)
l.attrs=[["class","poll-info"]],l=t.push("poll_info_counts_open","div",1),l.attrs=[["class","poll-info_counts"]],l=t.push("poll_info_counts_count_open","div",1),l.attrs=[["class","poll-info_counts-count"]],l=t.push("poll_info_number_open","span",1),l.attrs=[["class","info-number"]],l.block=!1,l=t.push("text","",0),l.content="0",t.push("poll_info_number_close","span",-1),l=t.push("poll_info_label_open","span",1),l.attrs=[["class","info-label"]],l.block=!1,l=t.push("text","",0),l.content=(0,e.i18n)("poll.voters",{count:0}),t.push("poll_info_label_close","span",-1),t.push("poll_info_counts_count_close","div",-1),t.push("poll_info_counts_close","div",-1),t.push("poll_info_close","div",-1)}(t),t.push("poll_close","div",-1))}}
function i(t,e){let l=t[0],o=t[1],s=t[2],n=t[3]
l=a(l,o,s,n,e[0],7,-680876936),n=a(n,l,o,s,e[1],12,-389564586),s=a(s,n,l,o,e[2],17,606105819),o=a(o,s,n,l,e[3],22,-1044525330),l=a(l,o,s,n,e[4],7,-176418897),n=a(n,l,o,s,e[5],12,1200080426),s=a(s,n,l,o,e[6],17,-1473231341),o=a(o,s,n,l,e[7],22,-45705983),l=a(l,o,s,n,e[8],7,1770035416),n=a(n,l,o,s,e[9],12,-1958414417),s=a(s,n,l,o,e[10],17,-42063),o=a(o,s,n,l,e[11],22,-1990404162),l=a(l,o,s,n,e[12],7,1804603682),n=a(n,l,o,s,e[13],12,-40341101),s=a(s,n,l,o,e[14],17,-1502002290),o=a(o,s,n,l,e[15],22,1236535329),l=u(l,o,s,n,e[1],5,-165796510),n=u(n,l,o,s,e[6],9,-1069501632),s=u(s,n,l,o,e[11],14,643717713),o=u(o,s,n,l,e[0],20,-373897302),l=u(l,o,s,n,e[5],5,-701558691),n=u(n,l,o,s,e[10],9,38016083),s=u(s,n,l,o,e[15],14,-660478335),o=u(o,s,n,l,e[4],20,-405537848),l=u(l,o,s,n,e[9],5,568446438),n=u(n,l,o,s,e[14],9,-1019803690),s=u(s,n,l,o,e[3],14,-187363961),o=u(o,s,n,l,e[8],20,1163531501),l=u(l,o,s,n,e[13],5,-1444681467),n=u(n,l,o,s,e[2],9,-51403784)
s=u(s,n,l,o,e[7],14,1735328473),o=u(o,s,n,l,e[12],20,-1926607734),l=p(l,o,s,n,e[5],4,-378558),n=p(n,l,o,s,e[8],11,-2022574463),s=p(s,n,l,o,e[11],16,1839030562),o=p(o,s,n,l,e[14],23,-35309556),l=p(l,o,s,n,e[1],4,-1530992060),n=p(n,l,o,s,e[4],11,1272893353),s=p(s,n,l,o,e[7],16,-155497632),o=p(o,s,n,l,e[10],23,-1094730640),l=p(l,o,s,n,e[13],4,681279174),n=p(n,l,o,s,e[0],11,-358537222),s=p(s,n,l,o,e[3],16,-722521979),o=p(o,s,n,l,e[6],23,76029189),l=p(l,o,s,n,e[9],4,-640364487),n=p(n,l,o,s,e[12],11,-421815835),s=p(s,n,l,o,e[15],16,530742520),o=p(o,s,n,l,e[2],23,-995338651),l=d(l,o,s,n,e[0],6,-198630844),n=d(n,l,o,s,e[7],10,1126891415),s=d(s,n,l,o,e[14],15,-1416354905),o=d(o,s,n,l,e[5],21,-57434055),l=d(l,o,s,n,e[12],6,1700485571),n=d(n,l,o,s,e[3],10,-1894986606),s=d(s,n,l,o,e[10],15,-1051523),o=d(o,s,n,l,e[1],21,-2054922799),l=d(l,o,s,n,e[8],6,1873313359),n=d(n,l,o,s,e[15],10,-30611744),s=d(s,n,l,o,e[6],15,-1560198380),o=d(o,s,n,l,e[13],21,1309151649)
l=d(l,o,s,n,e[4],6,-145523070),n=d(n,l,o,s,e[11],10,-1120210379),s=d(s,n,l,o,e[2],15,718787259),o=d(o,s,n,l,e[9],21,-343485551),t[0]=g(l,t[0]),t[1]=g(o,t[1]),t[2]=g(s,t[2]),t[3]=g(n,t[3])}function r(t,e,l,o,s,n){return e=g(g(e,t),g(o,n)),g(e<<s|e>>>32-s,l)}function a(t,e,l,o,s,n,i){return r(e&l|~e&o,t,e,s,n,i)}function u(t,e,l,o,s,n,i){return r(e&o|l&~o,t,e,s,n,i)}function p(t,e,l,o,s,n,i){return r(e^l^o,t,e,s,n,i)}function d(t,e,l,o,s,n,i){return r(l^(e|~o),t,e,s,n,i)}function c(t){let e,l=[]
for(e=0;e<64;e+=4)l[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24)
return l}let h="0123456789abcdef".split("")
function m(t){let e="",l=0
for(;l<4;l++)e+=h[t>>8*l+4&15]+h[t>>8*l&15]
return e}function g(t,e){return t+e&4294967295}function f(t){return function(t){for(let e=0;e<t.length;e++)t[e]=m(t[e])
return t.join("")}(function(t){let e,l=(t=unescape(encodeURI(t))).length,o=[1732584193,-271733879,-1732584194,271733878]
for(e=64;e<=t.length;e+=64)i(o,c(t.substring(e-64,e)))
t=t.substring(e-64)
let s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3)
if(s[e>>2]|=128<<(e%4<<3),e>55)for(i(o,s),e=0;e<16;e++)s[e]=0
return s[14]=8*l,i(o,s),o}(t))}}),define("discourse/plugins/poll/lib/even-round",["exports"],function(t){"use strict"
function e(t){return 100===t.map(t=>Math.floor(t)).reduce((t,e)=>t+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){let l=t.map(t=>t%1)
const o=Math.ceil(l.reduce((t,e)=>t+e))
for(let s=0,n=l.length;s<o&&s<n;s++){let o=0,s=0
for(let t=0;t<l.length;t++)l[t]>o&&(s=t,o=l[t])
if(++t[s],l[s]=0,e(t))break}return t.map(t=>Math.floor(t))}}),define("discourse/plugins/poll/lib/rich-editor-extension",["exports","discourse/lib/text"],function(t,e){"use strict"
Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
const l={nodeSpec:{poll:{attrs:{type:{default:null},results:{default:null},public:{default:null},name:{default:null},chartType:{default:null},close:{default:null},groups:{default:null},max:{default:null},min:{default:null},dynamic:{default:null}},content:"heading? bullet_list poll_info?",group:"block",selectable:!0,isolating:!0,defining:!0,parseDOM:[{tag:"div.poll",getAttrs:t=>({type:t.getAttribute("data-poll-type"),results:t.getAttribute("data-poll-results"),public:t.getAttribute("data-poll-public"),name:t.getAttribute("data-poll-name"),chartType:t.getAttribute("data-poll-chart-type"),close:t.getAttribute("data-poll-close"),groups:t.getAttribute("data-poll-groups"),dynamic:t.getAttribute("data-poll-dynamic"),max:t.getAttribute("data-poll-max"),min:t.getAttribute("data-poll-min")})}],toDOM:t=>["div",{class:"poll","data-poll-type":t.attrs.type,"data-poll-results":t.attrs.results,"data-poll-public":t.attrs.public,"data-poll-name":t.attrs.name,"data-poll-chart-type":t.attrs.chartType,"data-poll-close":t.attrs.close,"data-poll-groups":t.attrs.groups,"data-poll-dynamic":t.attrs.dynamic,"data-poll-max":t.attrs.max,"data-poll-min":t.attrs.min},0]},poll_info:{content:"inline*",selectable:!1,isolating:!0,parseDOM:[{tag:"div.poll-info"}],toDOM:()=>["div",{class:"poll-info",contentEditable:!1},0]}},parse:{poll:{block:"poll",getAttrs:t=>({...t.poll_attrs,name:"poll"===t.poll_attrs.name?null:t.poll_attrs.name})},poll_container:{ignore:!0},poll_title:{block:"heading"},poll_info:{block:"poll_info"},poll_info_counts:{ignore:!0},poll_info_counts_count:{ignore:!0},poll_info_number:{ignore:!0},poll_info_label_open(t){t.addText(" ")},poll_info_label_close(){}},serializeNode:{poll(t,l){const o=(0,e.buildBBCodeAttrs)(l.attrs)
t.write(`[poll${o?` ${o}`:""}]\n`),t.renderContent(l),t.write("[/poll]\n\n")},poll_info(){}}}
t.default=l})

//# sourceMappingURL=poll-45001cf5.map